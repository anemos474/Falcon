"use strict";

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.CategoryWithProductListQuery = exports.GET_CATEGORY_WITH_PRODUCT_LIST = void 0;

var _inheritsLoose2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/inheritsLoose"));

var _falconData = /*#__PURE__*/require("@deity/falcon-data");

var GET_CATEGORY_WITH_PRODUCT_LIST = {
  "kind": "Document",
  "definitions": [{
    "kind": "OperationDefinition",
    "operation": "query",
    "name": {
      "kind": "Name",
      "value": "CategoryWithProductList"
    },
    "variableDefinitions": [{
      "kind": "VariableDefinition",
      "variable": {
        "kind": "Variable",
        "name": {
          "kind": "Name",
          "value": "categoryId"
        }
      },
      "type": {
        "kind": "NonNullType",
        "type": {
          "kind": "NamedType",
          "name": {
            "kind": "Name",
            "value": "ID"
          }
        }
      },
      "directives": []
    }, {
      "kind": "VariableDefinition",
      "variable": {
        "kind": "Variable",
        "name": {
          "kind": "Name",
          "value": "sort"
        }
      },
      "type": {
        "kind": "NamedType",
        "name": {
          "kind": "Name",
          "value": "SortOrderInput"
        }
      },
      "directives": []
    }, {
      "kind": "VariableDefinition",
      "variable": {
        "kind": "Variable",
        "name": {
          "kind": "Name",
          "value": "pagination"
        }
      },
      "type": {
        "kind": "NamedType",
        "name": {
          "kind": "Name",
          "value": "PaginationInput"
        }
      },
      "directives": []
    }, {
      "kind": "VariableDefinition",
      "variable": {
        "kind": "Variable",
        "name": {
          "kind": "Name",
          "value": "filters"
        }
      },
      "type": {
        "kind": "ListType",
        "type": {
          "kind": "NonNullType",
          "type": {
            "kind": "NamedType",
            "name": {
              "kind": "Name",
              "value": "FilterInput"
            }
          }
        }
      },
      "directives": []
    }],
    "directives": [],
    "selectionSet": {
      "kind": "SelectionSet",
      "selections": [{
        "kind": "Field",
        "name": {
          "kind": "Name",
          "value": "category"
        },
        "arguments": [{
          "kind": "Argument",
          "name": {
            "kind": "Name",
            "value": "id"
          },
          "value": {
            "kind": "Variable",
            "name": {
              "kind": "Name",
              "value": "categoryId"
            }
          }
        }],
        "directives": [],
        "selectionSet": {
          "kind": "SelectionSet",
          "selections": [{
            "kind": "Field",
            "name": {
              "kind": "Name",
              "value": "id"
            },
            "arguments": [],
            "directives": []
          }, {
            "kind": "Field",
            "name": {
              "kind": "Name",
              "value": "name"
            },
            "arguments": [],
            "directives": []
          }, {
            "kind": "Field",
            "name": {
              "kind": "Name",
              "value": "seo"
            },
            "arguments": [],
            "directives": [],
            "selectionSet": {
              "kind": "SelectionSet",
              "selections": [{
                "kind": "Field",
                "name": {
                  "kind": "Name",
                  "value": "title"
                },
                "arguments": [],
                "directives": []
              }, {
                "kind": "Field",
                "name": {
                  "kind": "Name",
                  "value": "description"
                },
                "arguments": [],
                "directives": []
              }, {
                "kind": "Field",
                "name": {
                  "kind": "Name",
                  "value": "keywords"
                },
                "arguments": [],
                "directives": []
              }]
            }
          }, {
            "kind": "Field",
            "name": {
              "kind": "Name",
              "value": "productList"
            },
            "arguments": [{
              "kind": "Argument",
              "name": {
                "kind": "Name",
                "value": "input"
              },
              "value": {
                "kind": "ObjectValue",
                "fields": [{
                  "kind": "ObjectField",
                  "name": {
                    "kind": "Name",
                    "value": "sort"
                  },
                  "value": {
                    "kind": "Variable",
                    "name": {
                      "kind": "Name",
                      "value": "sort"
                    }
                  }
                }, {
                  "kind": "ObjectField",
                  "name": {
                    "kind": "Name",
                    "value": "pagination"
                  },
                  "value": {
                    "kind": "Variable",
                    "name": {
                      "kind": "Name",
                      "value": "pagination"
                    }
                  }
                }, {
                  "kind": "ObjectField",
                  "name": {
                    "kind": "Name",
                    "value": "filters"
                  },
                  "value": {
                    "kind": "Variable",
                    "name": {
                      "kind": "Name",
                      "value": "filters"
                    }
                  }
                }]
              }
            }],
            "directives": [],
            "selectionSet": {
              "kind": "SelectionSet",
              "selections": [{
                "kind": "Field",
                "name": {
                  "kind": "Name",
                  "value": "items"
                },
                "arguments": [],
                "directives": [],
                "selectionSet": {
                  "kind": "SelectionSet",
                  "selections": [{
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "id"
                    },
                    "arguments": [],
                    "directives": []
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "name"
                    },
                    "arguments": [],
                    "directives": []
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "price"
                    },
                    "arguments": [],
                    "directives": [],
                    "selectionSet": {
                      "kind": "SelectionSet",
                      "selections": [{
                        "kind": "Field",
                        "name": {
                          "kind": "Name",
                          "value": "regular"
                        },
                        "arguments": [],
                        "directives": []
                      }, {
                        "kind": "Field",
                        "name": {
                          "kind": "Name",
                          "value": "special"
                        },
                        "arguments": [],
                        "directives": []
                      }, {
                        "kind": "Field",
                        "name": {
                          "kind": "Name",
                          "value": "min"
                        },
                        "arguments": [],
                        "directives": []
                      }]
                    }
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "thumbnail"
                    },
                    "arguments": [],
                    "directives": []
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "urlPath"
                    },
                    "arguments": [],
                    "directives": []
                  }]
                }
              }, {
                "kind": "Field",
                "name": {
                  "kind": "Name",
                  "value": "pagination"
                },
                "arguments": [],
                "directives": [],
                "selectionSet": {
                  "kind": "SelectionSet",
                  "selections": [{
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "currentPage"
                    },
                    "arguments": [],
                    "directives": []
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "totalItems"
                    },
                    "arguments": [],
                    "directives": []
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "nextPage"
                    },
                    "arguments": [],
                    "directives": []
                  }]
                }
              }, {
                "kind": "Field",
                "name": {
                  "kind": "Name",
                  "value": "aggregations"
                },
                "arguments": [],
                "directives": [],
                "selectionSet": {
                  "kind": "SelectionSet",
                  "selections": [{
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "field"
                    },
                    "arguments": [],
                    "directives": []
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "type"
                    },
                    "arguments": [],
                    "directives": []
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "buckets"
                    },
                    "arguments": [],
                    "directives": [],
                    "selectionSet": {
                      "kind": "SelectionSet",
                      "selections": [{
                        "kind": "Field",
                        "name": {
                          "kind": "Name",
                          "value": "value"
                        },
                        "arguments": [],
                        "directives": []
                      }, {
                        "kind": "Field",
                        "name": {
                          "kind": "Name",
                          "value": "count"
                        },
                        "arguments": [],
                        "directives": []
                      }, {
                        "kind": "Field",
                        "name": {
                          "kind": "Name",
                          "value": "title"
                        },
                        "arguments": [],
                        "directives": []
                      }]
                    }
                  }, {
                    "kind": "Field",
                    "name": {
                      "kind": "Name",
                      "value": "title"
                    },
                    "arguments": [],
                    "directives": []
                  }]
                }
              }]
            }
          }]
        }
      }]
    }
  }],
  "loc": {
    "start": 0,
    "end": 815,
    "source": {
      "body": "\n  query CategoryWithProductList(\n    $categoryId: ID!\n    $sort: SortOrderInput\n    $pagination: PaginationInput\n    $filters: [FilterInput!]\n  ) {\n    category(id: $categoryId) {\n      id\n      name\n      seo {\n        title\n        description\n        keywords\n      }\n      productList(input: { sort: $sort, pagination: $pagination, filters: $filters }) {\n        items {\n          id\n          name\n          price {\n            regular\n            special\n            min\n          }\n          thumbnail\n          urlPath\n        }\n        pagination {\n          currentPage\n          totalItems\n          nextPage\n        }\n        aggregations {\n          field\n          type\n          buckets {\n            value\n            count\n            title\n          }\n          title\n        }\n      }\n    }\n  }\n",
      "name": "GraphQL request",
      "locationOffset": {
        "line": 1,
        "column": 1
      }
    }
  }
};
exports.GET_CATEGORY_WITH_PRODUCT_LIST = GET_CATEGORY_WITH_PRODUCT_LIST;

var fetchMore = function fetchMore(data, apolloFetchMore) {
  return apolloFetchMore({
    variables: {
      pagination: {
        page: data.category.productList.pagination.nextPage
      }
    },
    updateQuery: function updateQuery(prev, _ref) {
      var fetchMoreResult = _ref.fetchMoreResult;

      if (!fetchMoreResult) {
        return prev;
      }

      return Object.assign({}, prev, {
        category: Object.assign({}, prev.category, {
          productList: Object.assign({}, prev.category.productList, {
            items: [].concat(prev.category.productList.items, fetchMoreResult.category.productList.items),
            pagination: Object.assign({}, fetchMoreResult.category.productList.pagination)
          })
        })
      });
    }
  });
};

var CategoryWithProductListQuery = /*#__PURE__*/function (_Query) {
  (0, _inheritsLoose2.default)(CategoryWithProductListQuery, _Query);

  function CategoryWithProductListQuery() {
    return _Query.apply(this, arguments) || this;
  }

  return CategoryWithProductListQuery;
}(_falconData.Query);

exports.CategoryWithProductListQuery = CategoryWithProductListQuery;
CategoryWithProductListQuery.defaultProps = {
  query: GET_CATEGORY_WITH_PRODUCT_LIST,
  fetchPolicy: 'cache-and-network',
  fetchMore: fetchMore
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9DYXRlZ29yeS9DYXRlZ29yeVdpdGhQcm9kdWN0TGlzdFF1ZXJ5LnRzeCJdLCJuYW1lcyI6WyJHRVRfQ0FURUdPUllfV0lUSF9QUk9EVUNUX0xJU1QiLCJmZXRjaE1vcmUiLCJkYXRhIiwiYXBvbGxvRmV0Y2hNb3JlIiwidmFyaWFibGVzIiwicGFnaW5hdGlvbiIsInBhZ2UiLCJjYXRlZ29yeSIsInByb2R1Y3RMaXN0IiwibmV4dFBhZ2UiLCJ1cGRhdGVRdWVyeSIsInByZXYiLCJmZXRjaE1vcmVSZXN1bHQiLCJpdGVtcyIsIkNhdGVnb3J5V2l0aFByb2R1Y3RMaXN0UXVlcnkiLCJRdWVyeSIsImRlZmF1bHRQcm9wcyIsInF1ZXJ5IiwiZmV0Y2hQb2xpY3kiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNBOztBQUdPLElBQU1BLDhCQUE4QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsQ0FBcEM7OztBQThEUCxJQUFNQyxTQUFTLEdBQUcsU0FBWkEsU0FBWSxDQUFDQyxJQUFELEVBQVlDLGVBQVo7QUFBQSxTQUNoQkEsZUFBZSxDQUFDO0FBQ2RDLElBQUFBLFNBQVMsRUFBRTtBQUNUQyxNQUFBQSxVQUFVLEVBQUU7QUFDVkMsUUFBQUEsSUFBSSxFQUFFSixJQUFJLENBQUNLLFFBQUwsQ0FBY0MsV0FBZCxDQUEwQkgsVUFBMUIsQ0FBcUNJO0FBRGpDO0FBREgsS0FERztBQU1kQyxJQUFBQSxXQUFXLEVBQUUscUJBQUNDLElBQUQsUUFBeUM7QUFBQSxVQUEzQkMsZUFBMkIsUUFBM0JBLGVBQTJCOztBQUNwRCxVQUFJLENBQUNBLGVBQUwsRUFBc0I7QUFDcEIsZUFBT0QsSUFBUDtBQUNEOztBQUVELCtCQUNLQSxJQURMO0FBRUVKLFFBQUFBLFFBQVEsb0JBQ0hJLElBQUksQ0FBQ0osUUFERjtBQUVOQyxVQUFBQSxXQUFXLG9CQUNORyxJQUFJLENBQUNKLFFBQUwsQ0FBY0MsV0FEUjtBQUVUSyxZQUFBQSxLQUFLLFlBQU1GLElBQUksQ0FBQ0osUUFBTCxDQUFjQyxXQUFkLENBQTBCSyxLQUFoQyxFQUEwQ0QsZUFBZSxDQUFDTCxRQUFoQixDQUF5QkMsV0FBekIsQ0FBcUNLLEtBQS9FLENBRkk7QUFHVFIsWUFBQUEsVUFBVSxvQkFBT08sZUFBZSxDQUFDTCxRQUFoQixDQUF5QkMsV0FBekIsQ0FBcUNILFVBQTVDO0FBSEQ7QUFGTDtBQUZWO0FBV0Q7QUF0QmEsR0FBRCxDQURDO0FBQUEsQ0FBbEI7O0lBMEJhUyw0Qjs7Ozs7Ozs7RUFBcUNDLGlCOzs7QUFBckNELDRCLENBSUpFLFksR0FBZTtBQUNwQkMsRUFBQUEsS0FBSyxFQUFFakIsOEJBRGE7QUFFcEJrQixFQUFBQSxXQUFXLEVBQUUsbUJBRk87QUFHcEJqQixFQUFBQSxTQUFTLEVBQVRBO0FBSG9CLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBncWwgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7XG5pbXBvcnQgeyBRdWVyeSwgUGFnaW5hdGlvbiwgUGFnaW5hdGlvbklucHV0LCBBZ2dyZWdhdGlvbiwgU29ydE9yZGVyVmFsdWUgfSBmcm9tICdAZGVpdHkvZmFsY29uLWRhdGEnO1xuaW1wb3J0IHsgQ2F0ZWdvcnksIFByb2R1Y3QsIEZpbHRlcklucHV0IH0gZnJvbSAnQGRlaXR5L2ZhbGNvbi1zaG9wLWV4dGVuc2lvbic7XG5cbmV4cG9ydCBjb25zdCBHRVRfQ0FURUdPUllfV0lUSF9QUk9EVUNUX0xJU1QgPSBncWxgXG4gIHF1ZXJ5IENhdGVnb3J5V2l0aFByb2R1Y3RMaXN0KFxuICAgICRjYXRlZ29yeUlkOiBJRCFcbiAgICAkc29ydDogU29ydE9yZGVySW5wdXRcbiAgICAkcGFnaW5hdGlvbjogUGFnaW5hdGlvbklucHV0XG4gICAgJGZpbHRlcnM6IFtGaWx0ZXJJbnB1dCFdXG4gICkge1xuICAgIGNhdGVnb3J5KGlkOiAkY2F0ZWdvcnlJZCkge1xuICAgICAgaWRcbiAgICAgIG5hbWVcbiAgICAgIHNlbyB7XG4gICAgICAgIHRpdGxlXG4gICAgICAgIGRlc2NyaXB0aW9uXG4gICAgICAgIGtleXdvcmRzXG4gICAgICB9XG4gICAgICBwcm9kdWN0TGlzdChpbnB1dDogeyBzb3J0OiAkc29ydCwgcGFnaW5hdGlvbjogJHBhZ2luYXRpb24sIGZpbHRlcnM6ICRmaWx0ZXJzIH0pIHtcbiAgICAgICAgaXRlbXMge1xuICAgICAgICAgIGlkXG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIHByaWNlIHtcbiAgICAgICAgICAgIHJlZ3VsYXJcbiAgICAgICAgICAgIHNwZWNpYWxcbiAgICAgICAgICAgIG1pblxuICAgICAgICAgIH1cbiAgICAgICAgICB0aHVtYm5haWxcbiAgICAgICAgICB1cmxQYXRoXG4gICAgICAgIH1cbiAgICAgICAgcGFnaW5hdGlvbiB7XG4gICAgICAgICAgY3VycmVudFBhZ2VcbiAgICAgICAgICB0b3RhbEl0ZW1zXG4gICAgICAgICAgbmV4dFBhZ2VcbiAgICAgICAgfVxuICAgICAgICBhZ2dyZWdhdGlvbnMge1xuICAgICAgICAgIGZpZWxkXG4gICAgICAgICAgdHlwZVxuICAgICAgICAgIGJ1Y2tldHMge1xuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgIGNvdW50XG4gICAgICAgICAgICB0aXRsZVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aXRsZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5gO1xuXG5leHBvcnQgdHlwZSBDYXRlZ29yeVdpdGhQcm9kdWN0TGlzdFJlc3BvbnNlID0gUGljazxDYXRlZ29yeSwgJ2lkJyB8ICduYW1lJyB8ICdzZW8nPiAmIHtcbiAgcHJvZHVjdExpc3Q6IHtcbiAgICBpdGVtczogUGljazxQcm9kdWN0LCAnaWQnIHwgJ25hbWUnIHwgJ3ByaWNlJyB8ICd0aHVtYm5haWwnIHwgJ3VybFBhdGgnPltdO1xuICAgIHBhZ2luYXRpb246IFBpY2s8UGFnaW5hdGlvbiwgJ2N1cnJlbnRQYWdlJyB8ICd0b3RhbEl0ZW1zJyB8ICduZXh0UGFnZSc+O1xuICAgIGFnZ3JlZ2F0aW9uczogUGljazxBZ2dyZWdhdGlvbiwgJ2ZpZWxkJyB8ICd0eXBlJyB8ICd0aXRsZScgfCAnYnVja2V0cyc+O1xuICB9O1xufTtcblxuZXhwb3J0IHR5cGUgQ2F0ZWdvcnlXaXRoUHJvZHVjdExpc3RWYXJpYWJsZXMgPSB7XG4gIGNhdGVnb3J5SWQ/OiBzdHJpbmc7XG4gIHNvcnQ/OiBTb3J0T3JkZXJWYWx1ZTtcbiAgcGFnaW5hdGlvbj86IFBhZ2luYXRpb25JbnB1dDtcbiAgZmlsdGVycz86IEZpbHRlcklucHV0W107XG59O1xuXG5jb25zdCBmZXRjaE1vcmUgPSAoZGF0YTogYW55LCBhcG9sbG9GZXRjaE1vcmU6IGFueSkgPT5cbiAgYXBvbGxvRmV0Y2hNb3JlKHtcbiAgICB2YXJpYWJsZXM6IHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZTogZGF0YS5jYXRlZ29yeS5wcm9kdWN0TGlzdC5wYWdpbmF0aW9uLm5leHRQYWdlXG4gICAgICB9XG4gICAgfSxcbiAgICB1cGRhdGVRdWVyeTogKHByZXY6IGFueSwgeyBmZXRjaE1vcmVSZXN1bHQgfTogYW55KSA9PiB7XG4gICAgICBpZiAoIWZldGNoTW9yZVJlc3VsdCkge1xuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgICAuLi5wcmV2LmNhdGVnb3J5LFxuICAgICAgICAgIHByb2R1Y3RMaXN0OiB7XG4gICAgICAgICAgICAuLi5wcmV2LmNhdGVnb3J5LnByb2R1Y3RMaXN0LFxuICAgICAgICAgICAgaXRlbXM6IFsuLi5wcmV2LmNhdGVnb3J5LnByb2R1Y3RMaXN0Lml0ZW1zLCAuLi5mZXRjaE1vcmVSZXN1bHQuY2F0ZWdvcnkucHJvZHVjdExpc3QuaXRlbXNdLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjogeyAuLi5mZXRjaE1vcmVSZXN1bHQuY2F0ZWdvcnkucHJvZHVjdExpc3QucGFnaW5hdGlvbiB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbmV4cG9ydCBjbGFzcyBDYXRlZ29yeVdpdGhQcm9kdWN0TGlzdFF1ZXJ5IGV4dGVuZHMgUXVlcnk8XG4gIENhdGVnb3J5V2l0aFByb2R1Y3RMaXN0UmVzcG9uc2UsXG4gIENhdGVnb3J5V2l0aFByb2R1Y3RMaXN0VmFyaWFibGVzXG4+IHtcbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBxdWVyeTogR0VUX0NBVEVHT1JZX1dJVEhfUFJPRFVDVF9MSVNULFxuICAgIGZldGNoUG9saWN5OiAnY2FjaGUtYW5kLW5ldHdvcmsnLFxuICAgIGZldGNoTW9yZVxuICB9O1xufVxuIl19