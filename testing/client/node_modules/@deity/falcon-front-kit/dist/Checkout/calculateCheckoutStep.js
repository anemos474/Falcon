"use strict";

exports.__esModule = true;
exports.calculateCheckoutStepFactory = void 0;

var _CheckoutStep = /*#__PURE__*/require("./CheckoutStep");

var calculateCheckoutStepFactory = function calculateCheckoutStepFactory(stepsOrder) {
  return function (values, step) {
    var stepFromValues = stepsOrder.find(function (x) {
      return !values[x];
    }) || stepsOrder[stepsOrder.length - 1];

    if (step && step in _CheckoutStep.CheckoutStep) {
      var stepIndex = stepsOrder.findIndex(function (x) {
        return x === step;
      });
      var stepIndexFromValues = stepsOrder.findIndex(function (x) {
        return x === stepFromValues;
      });

      if (stepIndex < stepIndexFromValues) {
        return step;
      }
    }

    return stepFromValues;
  };
};

exports.calculateCheckoutStepFactory = calculateCheckoutStepFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9DaGVja291dC9jYWxjdWxhdGVDaGVja291dFN0ZXAudHMiXSwibmFtZXMiOlsiY2FsY3VsYXRlQ2hlY2tvdXRTdGVwRmFjdG9yeSIsInN0ZXBzT3JkZXIiLCJ2YWx1ZXMiLCJzdGVwIiwic3RlcEZyb21WYWx1ZXMiLCJmaW5kIiwieCIsImxlbmd0aCIsIkNoZWNrb3V0U3RlcCIsInN0ZXBJbmRleCIsImZpbmRJbmRleCIsInN0ZXBJbmRleEZyb21WYWx1ZXMiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0E7O0FBUU8sSUFBTUEsNEJBQTBELEdBQUcsU0FBN0RBLDRCQUE2RCxDQUFBQyxVQUFVO0FBQUEsU0FBSSxVQUFDQyxNQUFELEVBQVNDLElBQVQsRUFBa0I7QUFDeEcsUUFBTUMsY0FBYyxHQUFHSCxVQUFVLENBQUNJLElBQVgsQ0FBZ0IsVUFBQ0MsQ0FBRDtBQUFBLGFBQWUsQ0FBQ0osTUFBTSxDQUFDSSxDQUFELENBQXRCO0FBQUEsS0FBaEIsS0FBOENMLFVBQVUsQ0FBQ0EsVUFBVSxDQUFDTSxNQUFYLEdBQW9CLENBQXJCLENBQS9FOztBQUVBLFFBQUlKLElBQUksSUFBSUEsSUFBSSxJQUFJSywwQkFBcEIsRUFBa0M7QUFDaEMsVUFBTUMsU0FBUyxHQUFHUixVQUFVLENBQUNTLFNBQVgsQ0FBcUIsVUFBQUosQ0FBQztBQUFBLGVBQUlBLENBQUMsS0FBS0gsSUFBVjtBQUFBLE9BQXRCLENBQWxCO0FBQ0EsVUFBTVEsbUJBQW1CLEdBQUdWLFVBQVUsQ0FBQ1MsU0FBWCxDQUFxQixVQUFBSixDQUFDO0FBQUEsZUFBSUEsQ0FBQyxLQUFLRixjQUFWO0FBQUEsT0FBdEIsQ0FBNUI7O0FBQ0EsVUFBSUssU0FBUyxHQUFHRSxtQkFBaEIsRUFBcUM7QUFDbkMsZUFBT1IsSUFBUDtBQUNEO0FBQ0Y7O0FBRUQsV0FBT0MsY0FBUDtBQUNELEdBWm1GO0FBQUEsQ0FBN0UiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGVja291dFZhbHVlcyB9IGZyb20gJy4vQ2hlY2tvdXRWYWx1ZXMnO1xuaW1wb3J0IHsgQ2hlY2tvdXRTdGVwLCBDaGVja291dFN0ZXBUeXBlIH0gZnJvbSAnLi9DaGVja291dFN0ZXAnO1xuXG5leHBvcnQgdHlwZSBDYWxjdWxhdGVDaGVja291dFN0ZXA8VENoZWNrb3V0U3RlcCBleHRlbmRzIHN0cmluZz4gPSB7XG4gICh2YWx1ZXM6IENoZWNrb3V0VmFsdWVzICYgeyBbc3RlcCBpbiBUQ2hlY2tvdXRTdGVwXT86IGFueSB9LCBzdGVwPzogVENoZWNrb3V0U3RlcCk6IFRDaGVja291dFN0ZXA7XG59O1xuZXhwb3J0IHR5cGUgQ2FsY3VsYXRlQ2hlY2tvdXRTdGVwRmFjdG9yeSA9IHtcbiAgPFRDaGVja291dFN0ZXAgZXh0ZW5kcyBzdHJpbmcgPSBDaGVja291dFN0ZXBUeXBlPihzdGVwc09yZGVyOiBUQ2hlY2tvdXRTdGVwW10pOiBDYWxjdWxhdGVDaGVja291dFN0ZXA8VENoZWNrb3V0U3RlcD47XG59O1xuZXhwb3J0IGNvbnN0IGNhbGN1bGF0ZUNoZWNrb3V0U3RlcEZhY3Rvcnk6IENhbGN1bGF0ZUNoZWNrb3V0U3RlcEZhY3RvcnkgPSBzdGVwc09yZGVyID0+ICh2YWx1ZXMsIHN0ZXApID0+IHtcbiAgY29uc3Qgc3RlcEZyb21WYWx1ZXMgPSBzdGVwc09yZGVyLmZpbmQoKHg6IHN0cmluZykgPT4gIXZhbHVlc1t4XSkgfHwgc3RlcHNPcmRlcltzdGVwc09yZGVyLmxlbmd0aCAtIDFdO1xuXG4gIGlmIChzdGVwICYmIHN0ZXAgaW4gQ2hlY2tvdXRTdGVwKSB7XG4gICAgY29uc3Qgc3RlcEluZGV4ID0gc3RlcHNPcmRlci5maW5kSW5kZXgoeCA9PiB4ID09PSBzdGVwKTtcbiAgICBjb25zdCBzdGVwSW5kZXhGcm9tVmFsdWVzID0gc3RlcHNPcmRlci5maW5kSW5kZXgoeCA9PiB4ID09PSBzdGVwRnJvbVZhbHVlcyk7XG4gICAgaWYgKHN0ZXBJbmRleCA8IHN0ZXBJbmRleEZyb21WYWx1ZXMpIHtcbiAgICAgIHJldHVybiBzdGVwO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdGVwRnJvbVZhbHVlcztcbn07XG4iXX0=