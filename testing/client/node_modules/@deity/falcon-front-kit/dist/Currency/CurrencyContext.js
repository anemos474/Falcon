"use strict";

var _interopRequireWildcard = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.Currency = exports.useCurrency = exports.CurrencyProvider = void 0;

var _objectWithoutPropertiesLoose2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/objectWithoutPropertiesLoose"));

var _react = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("react"));

var _FalconScope = /*#__PURE__*/require("../FalconScope");

var _Locale = /*#__PURE__*/require("../Locale");

var _priceFormat = /*#__PURE__*/require("./priceFormat");

var CurrencyContext = /*#__PURE__*/_react.default.createContext({});

/**
 * Depends on `FalconScopeProvider` and `LocaleProvider`
 * @internal
 */
var CurrencyProvider = function CurrencyProvider(_ref) {
  var _ref$priceFormatOptio = _ref.priceFormatOptions,
      priceFormatOptions = _ref$priceFormatOptio === void 0 ? {} : _ref$priceFormatOptio,
      children = _ref.children,
      rest = (0, _objectWithoutPropertiesLoose2.default)(_ref, ["priceFormatOptions", "children"]);
  var scope = (0, _FalconScope.useFalconScope)();

  var _useLocale = (0, _Locale.useLocale)(),
      locale = _useLocale.locale,
      localeFallback = _useLocale.localeFallback;

  var currency = rest.currency || scope.current.currency;
  return /*#__PURE__*/_react.default.createElement(CurrencyContext.Provider, {
    value: {
      currency: currency,
      priceFormat: (0, _priceFormat.priceFormatFactory)([priceFormatOptions.locale, locale, localeFallback], Object.assign({
        currency: currency
      }, priceFormatOptions))
    }
  }, children);
};

exports.CurrencyProvider = CurrencyProvider;

var useCurrency = function useCurrency() {
  return (0, _react.useContext)(CurrencyContext);
};

exports.useCurrency = useCurrency;

var Currency = function Currency(_ref2) {
  var children = _ref2.children;
  return children(Object.assign({}, useCurrency()));
};

exports.Currency = Currency;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9DdXJyZW5jeS9DdXJyZW5jeUNvbnRleHQudHN4Il0sIm5hbWVzIjpbIkN1cnJlbmN5Q29udGV4dCIsIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsIkN1cnJlbmN5UHJvdmlkZXIiLCJwcmljZUZvcm1hdE9wdGlvbnMiLCJjaGlsZHJlbiIsInJlc3QiLCJzY29wZSIsImxvY2FsZSIsImxvY2FsZUZhbGxiYWNrIiwiY3VycmVuY3kiLCJjdXJyZW50IiwicHJpY2VGb3JtYXQiLCJ1c2VDdXJyZW5jeSIsIkN1cnJlbmN5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQU9BLElBQU1BLGVBQWUsZ0JBQUdDLGVBQU1DLGFBQU4sQ0FBeUMsRUFBekMsQ0FBeEI7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxJQUFNQyxnQkFBaUQsR0FBRyxTQUFwREEsZ0JBQW9ELE9BQW9EO0FBQUEsbUNBQWpEQyxrQkFBaUQ7QUFBQSxNQUFqREEsa0JBQWlELHNDQUE1QixFQUE0QjtBQUFBLE1BQXhCQyxRQUF3QixRQUF4QkEsUUFBd0I7QUFBQSxNQUFYQyxJQUFXO0FBQ25ILE1BQU1DLEtBQUssR0FBRyxrQ0FBZDs7QUFDQSxtQkFBbUMsd0JBQW5DO0FBQUEsTUFBUUMsTUFBUixjQUFRQSxNQUFSO0FBQUEsTUFBZ0JDLGNBQWhCLGNBQWdCQSxjQUFoQjs7QUFFQSxNQUFNQyxRQUFRLEdBQUdKLElBQUksQ0FBQ0ksUUFBTCxJQUFpQkgsS0FBSyxDQUFDSSxPQUFOLENBQWNELFFBQWhEO0FBRUEsc0JBQ0UsNkJBQUMsZUFBRCxDQUFpQixRQUFqQjtBQUNFLElBQUEsS0FBSyxFQUFFO0FBQ0xBLE1BQUFBLFFBQVEsRUFBUkEsUUFESztBQUVMRSxNQUFBQSxXQUFXLEVBQUUscUNBQW1CLENBQUNSLGtCQUFrQixDQUFDSSxNQUFwQixFQUE0QkEsTUFBNUIsRUFBb0NDLGNBQXBDLENBQW5CO0FBQ1hDLFFBQUFBLFFBQVEsRUFBUkE7QUFEVyxTQUVSTixrQkFGUTtBQUZSO0FBRFQsS0FTR0MsUUFUSCxDQURGO0FBYUQsQ0FuQk07Ozs7QUFxQkEsSUFBTVEsV0FBVyxHQUFHLFNBQWRBLFdBQWM7QUFBQSxTQUEyQix1QkFBV2IsZUFBWCxDQUEzQjtBQUFBLENBQXBCOzs7O0FBTUEsSUFBTWMsUUFBaUMsR0FBRyxTQUFwQ0EsUUFBb0M7QUFBQSxNQUFHVCxRQUFILFNBQUdBLFFBQUg7QUFBQSxTQUFrQkEsUUFBUSxtQkFBTVEsV0FBVyxFQUFqQixFQUExQjtBQUFBLENBQTFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VGYWxjb25TY29wZSB9IGZyb20gJy4uL0ZhbGNvblNjb3BlJztcbmltcG9ydCB7IHVzZUxvY2FsZSB9IGZyb20gJy4uL0xvY2FsZSc7XG5pbXBvcnQgeyBwcmljZUZvcm1hdEZhY3RvcnksIFByaWNlRm9ybWF0T3B0aW9ucyB9IGZyb20gJy4vcHJpY2VGb3JtYXQnO1xuXG5leHBvcnQgdHlwZSBDdXJyZW5jeUNvbnRleHRUeXBlID0ge1xuICBjdXJyZW5jeTogc3RyaW5nO1xuICBwcmljZUZvcm1hdDogUmV0dXJuVHlwZTx0eXBlb2YgcHJpY2VGb3JtYXRGYWN0b3J5Pjtcbn07XG5cbmNvbnN0IEN1cnJlbmN5Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8Q3VycmVuY3lDb250ZXh0VHlwZT4oe30gYXMgYW55KTtcblxuZXhwb3J0IHR5cGUgQ3VycmVuY3lQcm92aWRlclByb3BzID0ge1xuICAvKiogaWYgbm90IHByb3ZpZGVkICB0aGVuIGBiYWNrZW5kQ29uZmlnLnNob3AuYWN0aXZlQ3VycmVuY3lgIHdpbGwgYmUgdXNlZCAqL1xuICBjdXJyZW5jeT86IHN0cmluZztcbiAgcHJpY2VGb3JtYXRPcHRpb25zPzogUHJpY2VGb3JtYXRPcHRpb25zO1xufTtcbi8qKlxuICogRGVwZW5kcyBvbiBgRmFsY29uU2NvcGVQcm92aWRlcmAgYW5kIGBMb2NhbGVQcm92aWRlcmBcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgQ3VycmVuY3lQcm92aWRlcjogUmVhY3QuRkM8Q3VycmVuY3lQcm92aWRlclByb3BzPiA9ICh7IHByaWNlRm9ybWF0T3B0aW9ucyA9IHt9LCBjaGlsZHJlbiwgLi4ucmVzdCB9KSA9PiB7XG4gIGNvbnN0IHNjb3BlID0gdXNlRmFsY29uU2NvcGUoKTtcbiAgY29uc3QgeyBsb2NhbGUsIGxvY2FsZUZhbGxiYWNrIH0gPSB1c2VMb2NhbGUoKTtcblxuICBjb25zdCBjdXJyZW5jeSA9IHJlc3QuY3VycmVuY3kgfHwgc2NvcGUuY3VycmVudC5jdXJyZW5jeTtcblxuICByZXR1cm4gKFxuICAgIDxDdXJyZW5jeUNvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIGN1cnJlbmN5LFxuICAgICAgICBwcmljZUZvcm1hdDogcHJpY2VGb3JtYXRGYWN0b3J5KFtwcmljZUZvcm1hdE9wdGlvbnMubG9jYWxlLCBsb2NhbGUsIGxvY2FsZUZhbGxiYWNrXSwge1xuICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgIC4uLnByaWNlRm9ybWF0T3B0aW9uc1xuICAgICAgICB9KVxuICAgICAgfX1cbiAgICA+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9DdXJyZW5jeUNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgdXNlQ3VycmVuY3kgPSAoKTogQ3VycmVuY3lDb250ZXh0VHlwZSA9PiB1c2VDb250ZXh0KEN1cnJlbmN5Q29udGV4dCk7XG5cbmV4cG9ydCB0eXBlIEN1cnJlbmN5UmVuZGVyUHJvcHMgPSBDdXJyZW5jeUNvbnRleHRUeXBlO1xuZXhwb3J0IHR5cGUgQ3VycmVuY3lQcm9wcyA9IHtcbiAgY2hpbGRyZW46IChwcm9wczogQ3VycmVuY3lSZW5kZXJQcm9wcykgPT4gYW55O1xufTtcbmV4cG9ydCBjb25zdCBDdXJyZW5jeTogUmVhY3QuRkM8Q3VycmVuY3lQcm9wcz4gPSAoeyBjaGlsZHJlbiB9KSA9PiBjaGlsZHJlbih7IC4uLnVzZUN1cnJlbmN5KCkgfSk7XG4iXX0=