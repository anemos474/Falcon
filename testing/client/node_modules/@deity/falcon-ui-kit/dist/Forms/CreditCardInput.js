"use strict";

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.CreditCardInput = void 0;

var _extends2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/extends"));

var _inheritsLoose2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/inheritsLoose"));

var _react = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("react"));

var _reactCreditCardInput = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("react-credit-card-input"));

var _falconUi = /*#__PURE__*/require("@deity/falcon-ui");

var _falconI18n = /*#__PURE__*/require("@deity/falcon-i18n");

var CreditCardLayout = /*#__PURE__*/(0, _falconUi.themed)({
  tag: _falconUi.Box,
  defaultTheme: {
    creditCardLayout: {
      css: function css(_ref) {
        var theme = _ref.theme;
        return {
          'label:after': {
            paddingLeft: theme.spacing.sm,
            paddingRight: theme.spacing.sm
          },
          input: {
            fontSize: theme.fontSizes.sm
          }
        };
      }
    }
  }
});

var CreditCardInputInner = /*#__PURE__*/function (_React$Component) {
  (0, _inheritsLoose2.default)(CreditCardInputInner, _React$Component);

  function CreditCardInputInner(props) {
    var _this;

    _this = _React$Component.call(this, props) || this;
    _this.state = {
      number: undefined,
      expiry: undefined,
      cvc: undefined,
      name: undefined
    };
    return _this;
  }

  var _proto = CreditCardInputInner.prototype;

  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {
    var prevNumber = prevState.number,
        prevExpiry = prevState.expiry,
        prevCvc = prevState.cvc,
        prevName = prevState.name;
    var _this$state = this.state,
        number = _this$state.number,
        expiry = _this$state.expiry,
        cvc = _this$state.cvc,
        name = _this$state.name;

    if (number && expiry && cvc && name && (prevNumber !== number || prevCvc !== cvc || prevExpiry !== expiry || prevName !== name)) {
      this.props.onCompletion(this.state);
    }
  };

  _proto.render = function render() {
    var _this2 = this;

    var theme = this.props.theme;
    return /*#__PURE__*/_react.default.createElement(_falconI18n.I18n, null, function (t) {
      return /*#__PURE__*/_react.default.createElement(CreditCardLayout, null, /*#__PURE__*/_react.default.createElement(_falconUi.Box, {
        my: "xs"
      }, /*#__PURE__*/_react.default.createElement(_falconUi.Input, {
        my: "xs",
        autoComplete: "cc-name",
        name: "cc-name",
        placeholder: t('creditCard.namePlaceholder'),
        value: _this2.state.name,
        onChange: function onChange(_ref2) {
          var name = _ref2.target.value;

          _this2.setState({
            name: name
          });
        }
      })), /*#__PURE__*/_react.default.createElement(_reactCreditCardInput.default, {
        customTextLabels: {
          expiryError: {
            invalidExpiryDate: t('creditCard.errors.invalidExpiryDate'),
            monthOutOfRange: t('creditCard.errors.monthOutOfRange'),
            yearOutOfRange: t('creditCard.errors.yearOutOfRange'),
            dateOutOfRange: t('creditCard.errors.dateOutOfRange')
          },
          invalidCardNumber: t('creditCard.errors.invalidCardNumber'),
          invalidCvc: t('creditCard.errors.invalidCvc'),
          cardNumberPlaceholder: t('creditCard.numberPlaceholder'),
          expiryPlaceholder: t('creditCard.expiryPlaceholder'),
          cvcPlaceholder: t('creditCard.cvcPlaceholder')
        },
        fieldStyle: {
          border: '1px solid',
          borderColor: theme.colors.secondaryDark
        } // TODO: change any for better types
        ,
        cardNumberInputRenderer: function cardNumberInputRenderer(_ref3) {
          var handleCardNumberChange = _ref3.handleCardNumberChange,
              props = _ref3.props;
          return /*#__PURE__*/_react.default.createElement(_falconUi.Input, (0, _extends2.default)({}, props, {
            onChange: handleCardNumberChange(function (e) {
              return _this2.setState({
                number: e.target.value
              });
            })
          }));
        },
        cardExpiryInputRenderer: function cardExpiryInputRenderer(_ref4) {
          var handleCardExpiryChange = _ref4.handleCardExpiryChange,
              props = _ref4.props;
          return /*#__PURE__*/_react.default.createElement(_falconUi.Input, (0, _extends2.default)({}, props, {
            onChange: handleCardExpiryChange(function (e) {
              return _this2.setState({
                expiry: e.target.value
              });
            })
          }));
        },
        cardCVCInputRenderer: function cardCVCInputRenderer(_ref5) {
          var handleCardCVCChange = _ref5.handleCardCVCChange,
              props = _ref5.props;
          return /*#__PURE__*/_react.default.createElement(_falconUi.Input, (0, _extends2.default)({}, props, {
            onChange: handleCardCVCChange(function (e) {
              return _this2.setState({
                cvc: e.target.value
              });
            })
          }));
        }
      }));
    });
  };

  return CreditCardInputInner;
}(_react.default.Component);

var CreditCardInput = /*#__PURE__*/(0, _falconUi.withTheme)(CreditCardInputInner);
exports.CreditCardInput = CreditCardInput;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Gb3Jtcy9DcmVkaXRDYXJkSW5wdXQudHN4Il0sIm5hbWVzIjpbIkNyZWRpdENhcmRMYXlvdXQiLCJ0YWciLCJCb3giLCJkZWZhdWx0VGhlbWUiLCJjcmVkaXRDYXJkTGF5b3V0IiwiY3NzIiwidGhlbWUiLCJwYWRkaW5nTGVmdCIsInNwYWNpbmciLCJzbSIsInBhZGRpbmdSaWdodCIsImlucHV0IiwiZm9udFNpemUiLCJmb250U2l6ZXMiLCJDcmVkaXRDYXJkSW5wdXRJbm5lciIsInByb3BzIiwic3RhdGUiLCJudW1iZXIiLCJ1bmRlZmluZWQiLCJleHBpcnkiLCJjdmMiLCJuYW1lIiwiY29tcG9uZW50RGlkVXBkYXRlIiwiX3ByZXZQcm9wcyIsInByZXZTdGF0ZSIsInByZXZOdW1iZXIiLCJwcmV2RXhwaXJ5IiwicHJldkN2YyIsInByZXZOYW1lIiwib25Db21wbGV0aW9uIiwicmVuZGVyIiwidCIsInRhcmdldCIsInZhbHVlIiwic2V0U3RhdGUiLCJleHBpcnlFcnJvciIsImludmFsaWRFeHBpcnlEYXRlIiwibW9udGhPdXRPZlJhbmdlIiwieWVhck91dE9mUmFuZ2UiLCJkYXRlT3V0T2ZSYW5nZSIsImludmFsaWRDYXJkTnVtYmVyIiwiaW52YWxpZEN2YyIsImNhcmROdW1iZXJQbGFjZWhvbGRlciIsImV4cGlyeVBsYWNlaG9sZGVyIiwiY3ZjUGxhY2Vob2xkZXIiLCJib3JkZXIiLCJib3JkZXJDb2xvciIsImNvbG9ycyIsInNlY29uZGFyeURhcmsiLCJoYW5kbGVDYXJkTnVtYmVyQ2hhbmdlIiwiZSIsImhhbmRsZUNhcmRFeHBpcnlDaGFuZ2UiLCJoYW5kbGVDYXJkQ1ZDQ2hhbmdlIiwiUmVhY3QiLCJDb21wb25lbnQiLCJDcmVkaXRDYXJkSW5wdXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsSUFBTUEsZ0JBQWdCLGdCQUFHLHNCQUFPO0FBQzlCQyxFQUFBQSxHQUFHLEVBQUVD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Q0FBQyxVQUFDRCxDQUFEO0FBQUEscUJBQy9CLE1BQUksQ0FBQ2hCLFFBQUwsQ0FBYztBQUFFZixnQkFBQUEsTUFBTSxFQUFFK0IsQ0FBQyxDQUFDbEIsTUFBRixDQUFTQztBQUFuQixlQUFkLENBRCtCO0FBQUEsYUFBRDtBQUZsQyxhQUR1QjtBQUFBLFNBeEIzQjtBQWdDRSxRQUFBLG9CQUFvQixFQUFFO0FBQUEsY0FBR21CLG1CQUFILFNBQUdBLG1CQUFIO0FBQUEsY0FBd0JyQyxLQUF4QixTQUF3QkEsS0FBeEI7QUFBQSw4QkFDcEIsNkJBQUMsZUFBRCw2QkFDTUEsS0FETjtBQUVFLFlBQUEsUUFBUSxFQUFFcUMsbUJBQW1CLENBQUMsVUFBQ0YsQ0FBRDtBQUFBLHFCQUM1QixNQUFJLENBQUNoQixRQUFMLENBQWM7QUFBRWQsZ0JBQUFBLEdBQUcsRUFBRThCLENBQUMsQ0FBQ2xCLE1BQUYsQ0FBU0M7QUFBaEIsZUFBZCxDQUQ0QjtBQUFBLGFBQUQ7QUFGL0IsYUFEb0I7QUFBQTtBQWhDeEIsUUFiRixDQURBO0FBQUEsS0FESixDQURGO0FBNkRELEc7OztFQTFGZ0NvQixlQUFNQyxTOztBQTZGbEMsSUFBTUMsZUFBZSxnQkFBRyx5QkFBVXpDLG9CQUFWLENBQXhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdENyZWRpdENhcmRJbnB1dCBmcm9tICdyZWFjdC1jcmVkaXQtY2FyZC1pbnB1dCc7XG5pbXBvcnQgeyBCb3gsIElucHV0LCBQcm9wc1dpdGhUaGVtZSwgd2l0aFRoZW1lLCB0aGVtZWQgfSBmcm9tICdAZGVpdHkvZmFsY29uLXVpJztcbmltcG9ydCB7IEkxOG4gfSBmcm9tICdAZGVpdHkvZmFsY29uLWkxOG4nO1xuXG5jb25zdCBDcmVkaXRDYXJkTGF5b3V0ID0gdGhlbWVkKHtcbiAgdGFnOiBCb3gsXG4gIGRlZmF1bHRUaGVtZToge1xuICAgIGNyZWRpdENhcmRMYXlvdXQ6IHtcbiAgICAgIGNzczogKHsgdGhlbWUgfSkgPT4gKHtcbiAgICAgICAgJ2xhYmVsOmFmdGVyJzoge1xuICAgICAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nLnNtLFxuICAgICAgICAgIHBhZGRpbmdSaWdodDogdGhlbWUuc3BhY2luZy5zbVxuICAgICAgICB9LFxuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgIGZvbnRTaXplOiB0aGVtZS5mb250U2l6ZXMuc21cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pO1xuXG50eXBlIENyZWRpdENhcmRTdGF0ZSA9IHtcbiAgbnVtYmVyPzogc3RyaW5nO1xuICBleHBpcnk/OiBzdHJpbmc7XG4gIGN2Yz86IHN0cmluZztcbiAgbmFtZT86IHN0cmluZztcbn07XG5leHBvcnQgdHlwZSBDcmVkaXRDYXJkUHJvcHMgPSBQcm9wc1dpdGhUaGVtZTx7XG4gIG9uQ29tcGxldGlvbjogKGNyZWRpdENhcmRJbmZvOiBDcmVkaXRDYXJkU3RhdGUpID0+IHZvaWQ7XG59PjtcblxuY2xhc3MgQ3JlZGl0Q2FyZElucHV0SW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Q3JlZGl0Q2FyZFByb3BzLCBDcmVkaXRDYXJkU3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IENyZWRpdENhcmRQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbnVtYmVyOiB1bmRlZmluZWQsXG4gICAgICBleHBpcnk6IHVuZGVmaW5lZCxcbiAgICAgIGN2YzogdW5kZWZpbmVkLFxuICAgICAgbmFtZTogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShfcHJldlByb3BzOiBDcmVkaXRDYXJkUHJvcHMsIHByZXZTdGF0ZTogQ3JlZGl0Q2FyZFN0YXRlKSB7XG4gICAgY29uc3QgeyBudW1iZXI6IHByZXZOdW1iZXIsIGV4cGlyeTogcHJldkV4cGlyeSwgY3ZjOiBwcmV2Q3ZjLCBuYW1lOiBwcmV2TmFtZSB9ID0gcHJldlN0YXRlO1xuICAgIGNvbnN0IHsgbnVtYmVyLCBleHBpcnksIGN2YywgbmFtZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGlmIChcbiAgICAgIG51bWJlciAmJlxuICAgICAgZXhwaXJ5ICYmXG4gICAgICBjdmMgJiZcbiAgICAgIG5hbWUgJiZcbiAgICAgIChwcmV2TnVtYmVyICE9PSBudW1iZXIgfHwgcHJldkN2YyAhPT0gY3ZjIHx8IHByZXZFeHBpcnkgIT09IGV4cGlyeSB8fCBwcmV2TmFtZSAhPT0gbmFtZSlcbiAgICApIHtcbiAgICAgIHRoaXMucHJvcHMub25Db21wbGV0aW9uKHRoaXMuc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxJMThuPlxuICAgICAgICB7dCA9PiAoXG4gICAgICAgICAgPENyZWRpdENhcmRMYXlvdXQ+XG4gICAgICAgICAgICA8Qm94IG15PVwieHNcIj5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgbXk9XCJ4c1wiXG4gICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwiY2MtbmFtZVwiXG4gICAgICAgICAgICAgICAgbmFtZT1cImNjLW5hbWVcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdjcmVkaXRDYXJkLm5hbWVQbGFjZWhvbGRlcicpfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh7IHRhcmdldDogeyB2YWx1ZTogbmFtZSB9IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBuYW1lIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxSZWFjdENyZWRpdENhcmRJbnB1dFxuICAgICAgICAgICAgICBjdXN0b21UZXh0TGFiZWxzPXt7XG4gICAgICAgICAgICAgICAgZXhwaXJ5RXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgIGludmFsaWRFeHBpcnlEYXRlOiB0KCdjcmVkaXRDYXJkLmVycm9ycy5pbnZhbGlkRXhwaXJ5RGF0ZScpLFxuICAgICAgICAgICAgICAgICAgbW9udGhPdXRPZlJhbmdlOiB0KCdjcmVkaXRDYXJkLmVycm9ycy5tb250aE91dE9mUmFuZ2UnKSxcbiAgICAgICAgICAgICAgICAgIHllYXJPdXRPZlJhbmdlOiB0KCdjcmVkaXRDYXJkLmVycm9ycy55ZWFyT3V0T2ZSYW5nZScpLFxuICAgICAgICAgICAgICAgICAgZGF0ZU91dE9mUmFuZ2U6IHQoJ2NyZWRpdENhcmQuZXJyb3JzLmRhdGVPdXRPZlJhbmdlJylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGludmFsaWRDYXJkTnVtYmVyOiB0KCdjcmVkaXRDYXJkLmVycm9ycy5pbnZhbGlkQ2FyZE51bWJlcicpLFxuICAgICAgICAgICAgICAgIGludmFsaWRDdmM6IHQoJ2NyZWRpdENhcmQuZXJyb3JzLmludmFsaWRDdmMnKSxcbiAgICAgICAgICAgICAgICBjYXJkTnVtYmVyUGxhY2Vob2xkZXI6IHQoJ2NyZWRpdENhcmQubnVtYmVyUGxhY2Vob2xkZXInKSxcbiAgICAgICAgICAgICAgICBleHBpcnlQbGFjZWhvbGRlcjogdCgnY3JlZGl0Q2FyZC5leHBpcnlQbGFjZWhvbGRlcicpLFxuICAgICAgICAgICAgICAgIGN2Y1BsYWNlaG9sZGVyOiB0KCdjcmVkaXRDYXJkLmN2Y1BsYWNlaG9sZGVyJylcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgZmllbGRTdHlsZT17eyBib3JkZXI6ICcxcHggc29saWQnLCBib3JkZXJDb2xvcjogdGhlbWUuY29sb3JzLnNlY29uZGFyeURhcmsgfX1cbiAgICAgICAgICAgICAgLy8gVE9ETzogY2hhbmdlIGFueSBmb3IgYmV0dGVyIHR5cGVzXG4gICAgICAgICAgICAgIGNhcmROdW1iZXJJbnB1dFJlbmRlcmVyPXsoeyBoYW5kbGVDYXJkTnVtYmVyQ2hhbmdlLCBwcm9wcyB9OiBhbnkpID0+IChcbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDYXJkTnVtYmVyQ2hhbmdlKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG51bWJlcjogZS50YXJnZXQudmFsdWUgfSlcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgY2FyZEV4cGlyeUlucHV0UmVuZGVyZXI9eyh7IGhhbmRsZUNhcmRFeHBpcnlDaGFuZ2UsIHByb3BzIH06IGFueSkgPT4gKFxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNhcmRFeHBpcnlDaGFuZ2UoKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXhwaXJ5OiBlLnRhcmdldC52YWx1ZSB9KVxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBjYXJkQ1ZDSW5wdXRSZW5kZXJlcj17KHsgaGFuZGxlQ2FyZENWQ0NoYW5nZSwgcHJvcHMgfTogYW55KSA9PiAoXG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2FyZENWQ0NoYW5nZSgoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjdmM6IGUudGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvQ3JlZGl0Q2FyZExheW91dD5cbiAgICAgICAgKX1cbiAgICAgIDwvSTE4bj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBDcmVkaXRDYXJkSW5wdXQgPSB3aXRoVGhlbWUoQ3JlZGl0Q2FyZElucHV0SW5uZXIpO1xuIl19