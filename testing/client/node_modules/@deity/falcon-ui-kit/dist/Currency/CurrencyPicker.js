"use strict";

var _interopRequireWildcard = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.CurrencyPicker = exports.CurrencyPickerLayout = void 0;

var _extends2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/extends"));

var _objectWithoutPropertiesLoose2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/objectWithoutPropertiesLoose"));

var _react = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("react"));

var _falconI18n = /*#__PURE__*/require("@deity/falcon-i18n");

var _falconFrontKit = /*#__PURE__*/require("@deity/falcon-front-kit");

var _falconUi = /*#__PURE__*/require("@deity/falcon-ui");

var _Forms = /*#__PURE__*/require("../Forms");

var CurrencyPickerLayout = /*#__PURE__*/(0, _falconUi.themed)({
  tag: _falconUi.Box,
  defaultTheme: {
    currencyPickerLayout: {
      css: {
        minWidth: 96
      }
    }
  }
});
exports.CurrencyPickerLayout = CurrencyPickerLayout;

var CurrencyPicker = function CurrencyPicker(_ref) {
  var value = _ref.value,
      options = _ref.options,
      _onChange = _ref.onChange,
      showCartWarning = _ref.showCartWarning,
      id = _ref.id,
      label = _ref.label,
      rest = (0, _objectWithoutPropertiesLoose2.default)(_ref, ["value", "options", "onChange", "showCartWarning", "id", "label"]);

  var _useLocale = (0, _falconFrontKit.useLocale)(),
      locale = _useLocale.locale,
      localeFallback = _useLocale.localeFallback;

  var formattedOptions = options.map(function (option) {
    return {
      optionValue: option,
      optionLabel: (0, _falconFrontKit.getCurrencyLabel)(option, locale || localeFallback)
    };
  });
  var selectOptions = (0, _react.useMemo)(function () {
    return formattedOptions.map(function (_ref2) {
      var optionValue = _ref2.optionValue,
          optionLabel = _ref2.optionLabel;
      return {
        value: optionValue,
        label: optionLabel
      };
    });
  }, [formattedOptions]);

  var _useI18n = (0, _falconI18n.useI18n)(),
      t = _useI18n.t;

  return /*#__PURE__*/_react.default.createElement(CurrencyPickerLayout, null, label && /*#__PURE__*/_react.default.createElement(_falconUi.Label, {
    htmlFor: id ? "currency-switcher-" + id : 'currency-switcher'
  }, label), /*#__PURE__*/_react.default.createElement(_Forms.SelectInput, (0, _extends2.default)({}, rest, {
    id: id ? "currency-switcher-" + id : 'currency-switcher',
    value: value,
    options: selectOptions,
    "aria-label": label || t('currency.label'),
    onChange: function onChange(e) {
      var confirmation = showCartWarning ? confirm(t('currency.changeNote')) : true;

      if (confirmation === true) {
        _onChange(e.target.value);
      }
    }
  })));
};

exports.CurrencyPicker = CurrencyPicker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9DdXJyZW5jeS9DdXJyZW5jeVBpY2tlci50c3giXSwibmFtZXMiOlsiQ3VycmVuY3lQaWNrZXJMYXlvdXQiLCJ0YWciLCJCb3giLCJkZWZhdWx0VGhlbWUiLCJjdXJyZW5jeVBpY2tlckxheW91dCIsImNzcyIsIm1pbldpZHRoIiwiQ3VycmVuY3lQaWNrZXIiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJvbkNoYW5nZSIsInNob3dDYXJ0V2FybmluZyIsImlkIiwibGFiZWwiLCJyZXN0IiwibG9jYWxlIiwibG9jYWxlRmFsbGJhY2siLCJmb3JtYXR0ZWRPcHRpb25zIiwibWFwIiwib3B0aW9uIiwib3B0aW9uVmFsdWUiLCJvcHRpb25MYWJlbCIsInNlbGVjdE9wdGlvbnMiLCJ0IiwiZSIsImNvbmZpcm1hdGlvbiIsImNvbmZpcm0iLCJ0YXJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFXTyxJQUFNQSxvQkFBb0IsZ0JBQUcsc0JBQU87QUFDekNDLEVBQUFBLEdBQUcsRUFBRUMsYUFEb0M7QUFFekNDLEVBQUFBLFlBQVksRUFBRTtBQUNaQyxJQUFBQSxvQkFBb0IsRUFBRTtBQUNwQkMsTUFBQUEsR0FBRyxFQUFFO0FBQ0hDLFFBQUFBLFFBQVEsRUFBRTtBQURQO0FBRGU7QUFEVjtBQUYyQixDQUFQLENBQTdCOzs7QUFXQSxJQUFNQyxjQUE4QyxHQUFHLFNBQWpEQSxjQUFpRCxPQVF4RDtBQUFBLE1BUEpDLEtBT0ksUUFQSkEsS0FPSTtBQUFBLE1BTkpDLE9BTUksUUFOSkEsT0FNSTtBQUFBLE1BTEpDLFNBS0ksUUFMSkEsUUFLSTtBQUFBLE1BSkpDLGVBSUksUUFKSkEsZUFJSTtBQUFBLE1BSEpDLEVBR0ksUUFISkEsRUFHSTtBQUFBLE1BRkpDLEtBRUksUUFGSkEsS0FFSTtBQUFBLE1BRERDLElBQ0M7O0FBQ0osbUJBQW1DLGdDQUFuQztBQUFBLE1BQVFDLE1BQVIsY0FBUUEsTUFBUjtBQUFBLE1BQWdCQyxjQUFoQixjQUFnQkEsY0FBaEI7O0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUdSLE9BQU8sQ0FBQ1MsR0FBUixDQUFZLFVBQUFDLE1BQU07QUFBQSxXQUFLO0FBQzlDQyxNQUFBQSxXQUFXLEVBQUVELE1BRGlDO0FBRTlDRSxNQUFBQSxXQUFXLEVBQUUsc0NBQWlCRixNQUFqQixFQUF5QkosTUFBTSxJQUFJQyxjQUFuQztBQUZpQyxLQUFMO0FBQUEsR0FBbEIsQ0FBekI7QUFJQSxNQUFNTSxhQUFhLEdBQUcsb0JBQ3BCO0FBQUEsV0FDRUwsZ0JBQWdCLENBQUNDLEdBQWpCLENBQXFCO0FBQUEsVUFBR0UsV0FBSCxTQUFHQSxXQUFIO0FBQUEsVUFBZ0JDLFdBQWhCLFNBQWdCQSxXQUFoQjtBQUFBLGFBQW1DO0FBQ3REYixRQUFBQSxLQUFLLEVBQUVZLFdBRCtDO0FBRXREUCxRQUFBQSxLQUFLLEVBQUVRO0FBRitDLE9BQW5DO0FBQUEsS0FBckIsQ0FERjtBQUFBLEdBRG9CLEVBTXBCLENBQUNKLGdCQUFELENBTm9CLENBQXRCOztBQVNBLGlCQUFjLDBCQUFkO0FBQUEsTUFBUU0sQ0FBUixZQUFRQSxDQUFSOztBQUVBLHNCQUNFLDZCQUFDLG9CQUFELFFBQ0dWLEtBQUssaUJBQUksNkJBQUMsZUFBRDtBQUFPLElBQUEsT0FBTyxFQUFFRCxFQUFFLDBCQUF3QkEsRUFBeEIsR0FBK0I7QUFBakQsS0FBdUVDLEtBQXZFLENBRFosZUFFRSw2QkFBQyxrQkFBRCw2QkFDTUMsSUFETjtBQUVFLElBQUEsRUFBRSxFQUFFRixFQUFFLDBCQUF3QkEsRUFBeEIsR0FBK0IsbUJBRnZDO0FBR0UsSUFBQSxLQUFLLEVBQUVKLEtBSFQ7QUFJRSxJQUFBLE9BQU8sRUFBRWMsYUFKWDtBQUtFLGtCQUFZVCxLQUFLLElBQUlVLENBQUMsQ0FBQyxnQkFBRCxDQUx4QjtBQU1FLElBQUEsUUFBUSxFQUFFLGtCQUFBQyxDQUFDLEVBQUk7QUFDYixVQUFNQyxZQUFZLEdBQUdkLGVBQWUsR0FBR2UsT0FBTyxDQUFDSCxDQUFDLENBQUMscUJBQUQsQ0FBRixDQUFWLEdBQXVDLElBQTNFOztBQUNBLFVBQUlFLFlBQVksS0FBSyxJQUFyQixFQUEyQjtBQUN6QmYsUUFBQUEsU0FBUSxDQUFDYyxDQUFDLENBQUNHLE1BQUYsQ0FBU25CLEtBQVYsQ0FBUjtBQUNEO0FBQ0Y7QUFYSCxLQUZGLENBREY7QUFrQkQsQ0EzQ00iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUkxOG4gfSBmcm9tICdAZGVpdHkvZmFsY29uLWkxOG4nO1xuaW1wb3J0IHsgZ2V0Q3VycmVuY3lMYWJlbCwgdXNlTG9jYWxlIH0gZnJvbSAnQGRlaXR5L2ZhbGNvbi1mcm9udC1raXQnO1xuaW1wb3J0IHsgQm94LCBMYWJlbCwgdGhlbWVkIH0gZnJvbSAnQGRlaXR5L2ZhbGNvbi11aSc7XG5pbXBvcnQgeyBTZWxlY3RJbnB1dCwgU2VsZWN0SW5wdXRQcm9wcyB9IGZyb20gJy4uL0Zvcm1zJztcblxuZXhwb3J0IHR5cGUgQ3VycmVuY3lQaWNrZXJQcm9wcyA9IE9taXQ8U2VsZWN0SW5wdXRQcm9wcywgJ29wdGlvbnMnIHwgJ29uQ2hhbmdlJz4gJiB7XG4gIG9wdGlvbnM6IFtzdHJpbmddO1xuICB2YWx1ZTogc3RyaW5nO1xuICBzaG93Q2FydFdhcm5pbmc6IGJvb2xlYW47XG4gIGlkOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gYW55O1xufTtcblxuZXhwb3J0IGNvbnN0IEN1cnJlbmN5UGlja2VyTGF5b3V0ID0gdGhlbWVkKHtcbiAgdGFnOiBCb3gsXG4gIGRlZmF1bHRUaGVtZToge1xuICAgIGN1cnJlbmN5UGlja2VyTGF5b3V0OiB7XG4gICAgICBjc3M6IHtcbiAgICAgICAgbWluV2lkdGg6IDk2XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuZXhwb3J0IGNvbnN0IEN1cnJlbmN5UGlja2VyOiBSZWFjdC5TRkM8Q3VycmVuY3lQaWNrZXJQcm9wcz4gPSAoe1xuICB2YWx1ZSxcbiAgb3B0aW9ucyxcbiAgb25DaGFuZ2UsXG4gIHNob3dDYXJ0V2FybmluZyxcbiAgaWQsXG4gIGxhYmVsLFxuICAuLi5yZXN0XG59KSA9PiB7XG4gIGNvbnN0IHsgbG9jYWxlLCBsb2NhbGVGYWxsYmFjayB9ID0gdXNlTG9jYWxlKCk7XG4gIGNvbnN0IGZvcm1hdHRlZE9wdGlvbnMgPSBvcHRpb25zLm1hcChvcHRpb24gPT4gKHtcbiAgICBvcHRpb25WYWx1ZTogb3B0aW9uLFxuICAgIG9wdGlvbkxhYmVsOiBnZXRDdXJyZW5jeUxhYmVsKG9wdGlvbiwgbG9jYWxlIHx8IGxvY2FsZUZhbGxiYWNrKVxuICB9KSk7XG4gIGNvbnN0IHNlbGVjdE9wdGlvbnMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBmb3JtYXR0ZWRPcHRpb25zLm1hcCgoeyBvcHRpb25WYWx1ZSwgb3B0aW9uTGFiZWwgfSkgPT4gKHtcbiAgICAgICAgdmFsdWU6IG9wdGlvblZhbHVlLFxuICAgICAgICBsYWJlbDogb3B0aW9uTGFiZWxcbiAgICAgIH0pKSxcbiAgICBbZm9ybWF0dGVkT3B0aW9uc11cbiAgKTtcblxuICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcblxuICByZXR1cm4gKFxuICAgIDxDdXJyZW5jeVBpY2tlckxheW91dD5cbiAgICAgIHtsYWJlbCAmJiA8TGFiZWwgaHRtbEZvcj17aWQgPyBgY3VycmVuY3ktc3dpdGNoZXItJHtpZH1gIDogJ2N1cnJlbmN5LXN3aXRjaGVyJ30+e2xhYmVsfTwvTGFiZWw+fVxuICAgICAgPFNlbGVjdElucHV0XG4gICAgICAgIHsuLi5yZXN0fVxuICAgICAgICBpZD17aWQgPyBgY3VycmVuY3ktc3dpdGNoZXItJHtpZH1gIDogJ2N1cnJlbmN5LXN3aXRjaGVyJ31cbiAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICBvcHRpb25zPXtzZWxlY3RPcHRpb25zfVxuICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbCB8fCB0KCdjdXJyZW5jeS5sYWJlbCcpfVxuICAgICAgICBvbkNoYW5nZT17ZSA9PiB7XG4gICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uID0gc2hvd0NhcnRXYXJuaW5nID8gY29uZmlybSh0KCdjdXJyZW5jeS5jaGFuZ2VOb3RlJykpIDogdHJ1ZTtcbiAgICAgICAgICBpZiAoY29uZmlybWF0aW9uID09PSB0cnVlKSB7XG4gICAgICAgICAgICBvbkNoYW5nZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgLz5cbiAgICA8L0N1cnJlbmN5UGlja2VyTGF5b3V0PlxuICApO1xufTtcbiJdfQ==