"use strict";

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.MiniCartProduct = exports.MiniCartProductArea = void 0;

var _react = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("react"));

var _falconUi = /*#__PURE__*/require("@deity/falcon-ui");

var _falconI18n = /*#__PURE__*/require("@deity/falcon-i18n");

var _falconShopData = /*#__PURE__*/require("@deity/falcon-shop-data");

var _helpers = /*#__PURE__*/require("../helpers");

var _Price = /*#__PURE__*/require("../Price");

var MiniCartProductArea = {
  empty: '.',
  thumb: 'thumb',
  price: 'price',
  productName: 'productName',
  modify: 'modify',
  remove: 'remove'
};
exports.MiniCartProductArea = MiniCartProductArea;
var miniCartProductTheme = {
  miniCartProduct: {
    display: 'grid',
    gridGap: 'xs',
    // prettier-ignore
    gridTemplate: /*#__PURE__*/(0, _helpers.toGridTemplate)([['30px', '1fr', '2fr'], [MiniCartProductArea.empty, MiniCartProductArea.thumb, MiniCartProductArea.productName], [MiniCartProductArea.remove, MiniCartProductArea.thumb, MiniCartProductArea.price, '1fr'], [MiniCartProductArea.empty, MiniCartProductArea.thumb, MiniCartProductArea.modify]])
  }
};

var MiniCartProduct = function MiniCartProduct(_ref) {
  var product = _ref.product;
  return /*#__PURE__*/_react.default.createElement(_falconUi.Box, {
    defaultTheme: miniCartProductTheme
  }, /*#__PURE__*/_react.default.createElement(_falconUi.Image, {
    gridArea: MiniCartProductArea.thumb,
    src: product.thumbnailUrl
  }), /*#__PURE__*/_react.default.createElement(_falconUi.H4, {
    gridArea: MiniCartProductArea.productName
  }, product.name), /*#__PURE__*/_react.default.createElement(_Price.Price, {
    gridArea: MiniCartProductArea.price,
    value: product.price,
    fontSize: "md",
    fontWeight: "bold"
  }), /*#__PURE__*/_react.default.createElement(_falconShopData.RemoveCartItemMutation, null, function (removeCartItem) {
    return /*#__PURE__*/_react.default.createElement(_falconUi.Link, {
      gridArea: MiniCartProductArea.remove,
      display: "flex",
      alignItems: "center",
      onClick: function onClick() {
        return removeCartItem({
          variables: {
            input: {
              id: product.id
            }
          },
          optimisticResponse: {
            removeCartItem: {
              __typename: 'RemoveCartItemPayload',
              id: product.id
            }
          }
        });
      }
    }, /*#__PURE__*/_react.default.createElement(_falconUi.Icon, {
      size: "lg",
      stroke: "secondaryDark",
      src: "remove",
      mr: "xs",
      css: function css(_ref2) {
        var theme = _ref2.theme;
        return {
          ':hover': {
            stroke: theme.colors.primary
          }
        };
      }
    }));
  }), /*#__PURE__*/_react.default.createElement(_falconShopData.UpdateCartItemMutation, null, function (updateCartItem, _ref3) {
    var loading = _ref3.loading,
        error = _ref3.error;
    return /*#__PURE__*/_react.default.createElement(_falconUi.Box, {
      gridArea: MiniCartProductArea.modify
    }, /*#__PURE__*/_react.default.createElement(_falconI18n.I18n, null, function (t) {
      return /*#__PURE__*/_react.default.createElement(_falconUi.NumberInput, {
        disabled: loading,
        name: "qty",
        value: product.qty,
        "aria-label": t('product.qtyFieldLabel'),
        onChange: function onChange(ev) {
          return updateCartItem({
            variables: {
              input: {
                id: product.id,
                sku: product.sku,
                qty: parseInt(ev.target.value, 10)
              }
            }
          });
        }
      });
    }), !!error && /*#__PURE__*/_react.default.createElement(_falconUi.Text, {
      color: "error"
    }, error.message));
  }));
};

exports.MiniCartProduct = MiniCartProduct;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9NaW5pQ2FydC9NaW5pQ2FydFByb2R1Y3QudHN4Il0sIm5hbWVzIjpbIk1pbmlDYXJ0UHJvZHVjdEFyZWEiLCJlbXB0eSIsInRodW1iIiwicHJpY2UiLCJwcm9kdWN0TmFtZSIsIm1vZGlmeSIsInJlbW92ZSIsIm1pbmlDYXJ0UHJvZHVjdFRoZW1lIiwibWluaUNhcnRQcm9kdWN0IiwiZGlzcGxheSIsImdyaWRHYXAiLCJncmlkVGVtcGxhdGUiLCJNaW5pQ2FydFByb2R1Y3QiLCJwcm9kdWN0IiwidGh1bWJuYWlsVXJsIiwibmFtZSIsInJlbW92ZUNhcnRJdGVtIiwidmFyaWFibGVzIiwiaW5wdXQiLCJpZCIsIm9wdGltaXN0aWNSZXNwb25zZSIsIl9fdHlwZW5hbWUiLCJ0aGVtZSIsInN0cm9rZSIsImNvbG9ycyIsInByaW1hcnkiLCJ1cGRhdGVDYXJ0SXRlbSIsImxvYWRpbmciLCJlcnJvciIsInQiLCJxdHkiLCJldiIsInNrdSIsInBhcnNlSW50IiwidGFyZ2V0IiwidmFsdWUiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRU8sSUFBTUEsbUJBQW1CLEdBQUc7QUFDakNDLEVBQUFBLEtBQUssRUFBRSxHQUQwQjtBQUVqQ0MsRUFBQUEsS0FBSyxFQUFFLE9BRjBCO0FBR2pDQyxFQUFBQSxLQUFLLEVBQUUsT0FIMEI7QUFJakNDLEVBQUFBLFdBQVcsRUFBRSxhQUpvQjtBQUtqQ0MsRUFBQUEsTUFBTSxFQUFFLFFBTHlCO0FBTWpDQyxFQUFBQSxNQUFNLEVBQUU7QUFOeUIsQ0FBNUI7O0FBU1AsSUFBTUMsb0JBQWtDLEdBQUc7QUFDekNDLEVBQUFBLGVBQWUsRUFBRTtBQUNmQyxJQUFBQSxPQUFPLEVBQUUsTUFETTtBQUVmQyxJQUFBQSxPQUFPLEVBQUUsSUFGTTtBQUdmO0FBQ0FDLElBQUFBLFlBQVksZUFBRSw2QkFBZSxDQUMzQixDQUFDLE1BQUQsRUFBNkIs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c0JBQVlELENBQUMsQ0FBQyx1QkFBRCxDQUpmO0FBS0UsUUFBQSxRQUFRLEVBQUUsa0JBQUFFLEVBQUU7QUFBQSxpQkFDVkwsY0FBYyxDQUFDO0FBQ2JULFlBQUFBLFNBQVMsRUFBRTtBQUNUQyxjQUFBQSxLQUFLLEVBQUU7QUFDTEMsZ0JBQUFBLEVBQUUsRUFBRU4sT0FBTyxDQUFDTSxFQURQO0FBRUxhLGdCQUFBQSxHQUFHLEVBQUVuQixPQUFPLENBQUNtQixHQUZSO0FBR0xGLGdCQUFBQSxHQUFHLEVBQUVHLFFBQVEsQ0FBQ0YsRUFBRSxDQUFDRyxNQUFILENBQVVDLEtBQVgsRUFBa0IsRUFBbEI7QUFIUjtBQURFO0FBREUsV0FBRCxDQURKO0FBQUE7QUFMZCxRQURBO0FBQUEsS0FESixDQURGLEVBdUJHLENBQUMsQ0FBQ1AsS0FBRixpQkFBVyw2QkFBQyxjQUFEO0FBQU0sTUFBQSxLQUFLLEVBQUM7QUFBWixPQUFxQkEsS0FBSyxDQUFDUSxPQUEzQixDQXZCZCxDQUREO0FBQUEsR0FESCxDQTNCRixDQUQ2QztBQUFBLENBQXhDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEljb24sIEJveCwgSDQsIERlZmF1bHRUaGVtZSwgSW1hZ2UsIExpbmssIFRleHQsIE51bWJlcklucHV0IH0gZnJvbSAnQGRlaXR5L2ZhbGNvbi11aSc7XG5pbXBvcnQgeyBJMThuIH0gZnJvbSAnQGRlaXR5L2ZhbGNvbi1pMThuJztcbmltcG9ydCB7IFJlbW92ZUNhcnRJdGVtTXV0YXRpb24sIFVwZGF0ZUNhcnRJdGVtTXV0YXRpb24gfSBmcm9tICdAZGVpdHkvZmFsY29uLXNob3AtZGF0YSc7XG5pbXBvcnQgeyB0b0dyaWRUZW1wbGF0ZSB9IGZyb20gJy4uL2hlbHBlcnMnO1xuaW1wb3J0IHsgUHJpY2UgfSBmcm9tICcuLi9QcmljZSc7XG5cbmV4cG9ydCBjb25zdCBNaW5pQ2FydFByb2R1Y3RBcmVhID0ge1xuICBlbXB0eTogJy4nLFxuICB0aHVtYjogJ3RodW1iJyxcbiAgcHJpY2U6ICdwcmljZScsXG4gIHByb2R1Y3ROYW1lOiAncHJvZHVjdE5hbWUnLFxuICBtb2RpZnk6ICdtb2RpZnknLFxuICByZW1vdmU6ICdyZW1vdmUnXG59O1xuXG5jb25zdCBtaW5pQ2FydFByb2R1Y3RUaGVtZTogRGVmYXVsdFRoZW1lID0ge1xuICBtaW5pQ2FydFByb2R1Y3Q6IHtcbiAgICBkaXNwbGF5OiAnZ3JpZCcsXG4gICAgZ3JpZEdhcDogJ3hzJyxcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICBncmlkVGVtcGxhdGU6IHRvR3JpZFRlbXBsYXRlKFtcbiAgICAgIFsnMzBweCcsICAgICAgICAgICAgICAgICAgICAgJzFmcicsICAgICAgICAgICAgICAgICAgICAgJzJmcicgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgW01pbmlDYXJ0UHJvZHVjdEFyZWEuZW1wdHksICBNaW5pQ2FydFByb2R1Y3RBcmVhLnRodW1iLCBNaW5pQ2FydFByb2R1Y3RBcmVhLnByb2R1Y3ROYW1lICAgICAgICAgIF0sXG4gICAgICBbTWluaUNhcnRQcm9kdWN0QXJlYS5yZW1vdmUsIE1pbmlDYXJ0UHJvZHVjdEFyZWEudGh1bWIsIE1pbmlDYXJ0UHJvZHVjdEFyZWEucHJpY2UsICAgICAgICAgICcxZnInXSxcbiAgICAgIFtNaW5pQ2FydFByb2R1Y3RBcmVhLmVtcHR5LCAgTWluaUNhcnRQcm9kdWN0QXJlYS50aHVtYiwgTWluaUNhcnRQcm9kdWN0QXJlYS5tb2RpZnkgICAgICAgICAgICAgICBdXG4gICAgXSlcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IE1pbmlDYXJ0UHJvZHVjdDogUmVhY3QuU0ZDPGFueT4gPSAoeyBwcm9kdWN0IH0pID0+IChcbiAgPEJveCBkZWZhdWx0VGhlbWU9e21pbmlDYXJ0UHJvZHVjdFRoZW1lfT5cbiAgICA8SW1hZ2UgZ3JpZEFyZWE9e01pbmlDYXJ0UHJvZHVjdEFyZWEudGh1bWJ9IHNyYz17cHJvZHVjdC50aHVtYm5haWxVcmx9IC8+XG4gICAgPEg0IGdyaWRBcmVhPXtNaW5pQ2FydFByb2R1Y3RBcmVhLnByb2R1Y3ROYW1lfT57cHJvZHVjdC5uYW1lfTwvSDQ+XG4gICAgPFByaWNlIGdyaWRBcmVhPXtNaW5pQ2FydFByb2R1Y3RBcmVhLnByaWNlfSB2YWx1ZT17cHJvZHVjdC5wcmljZX0gZm9udFNpemU9XCJtZFwiIGZvbnRXZWlnaHQ9XCJib2xkXCIgLz5cbiAgICA8UmVtb3ZlQ2FydEl0ZW1NdXRhdGlvbj5cbiAgICAgIHtyZW1vdmVDYXJ0SXRlbSA9PiAoXG4gICAgICAgIDxMaW5rXG4gICAgICAgICAgZ3JpZEFyZWE9e01pbmlDYXJ0UHJvZHVjdEFyZWEucmVtb3ZlfVxuICAgICAgICAgIGRpc3BsYXk9XCJmbGV4XCJcbiAgICAgICAgICBhbGlnbkl0ZW1zPVwiY2VudGVyXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgcmVtb3ZlQ2FydEl0ZW0oe1xuICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsgaW5wdXQ6IHsgaWQ6IHByb2R1Y3QuaWQgfSB9LFxuICAgICAgICAgICAgICBvcHRpbWlzdGljUmVzcG9uc2U6IHsgcmVtb3ZlQ2FydEl0ZW06IHsgX190eXBlbmFtZTogJ1JlbW92ZUNhcnRJdGVtUGF5bG9hZCcsIGlkOiBwcm9kdWN0LmlkIH0gfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgID5cbiAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgc2l6ZT1cImxnXCJcbiAgICAgICAgICAgIHN0cm9rZT1cInNlY29uZGFyeURhcmtcIlxuICAgICAgICAgICAgc3JjPVwicmVtb3ZlXCJcbiAgICAgICAgICAgIG1yPVwieHNcIlxuICAgICAgICAgICAgY3NzPXsoeyB0aGVtZSB9KSA9PiAoeyAnOmhvdmVyJzogeyBzdHJva2U6IHRoZW1lLmNvbG9ycy5wcmltYXJ5IH0gfSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9MaW5rPlxuICAgICAgKX1cbiAgICA8L1JlbW92ZUNhcnRJdGVtTXV0YXRpb24+XG4gICAgPFVwZGF0ZUNhcnRJdGVtTXV0YXRpb24+XG4gICAgICB7KHVwZGF0ZUNhcnRJdGVtLCB7IGxvYWRpbmcsIGVycm9yIH0pID0+IChcbiAgICAgICAgPEJveCBncmlkQXJlYT17TWluaUNhcnRQcm9kdWN0QXJlYS5tb2RpZnl9PlxuICAgICAgICAgIDxJMThuPlxuICAgICAgICAgICAge3QgPT4gKFxuICAgICAgICAgICAgICA8TnVtYmVySW5wdXRcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cbiAgICAgICAgICAgICAgICBuYW1lPVwicXR5XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17cHJvZHVjdC5xdHl9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17dCgncHJvZHVjdC5xdHlGaWVsZExhYmVsJyl9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+XG4gICAgICAgICAgICAgICAgICB1cGRhdGVDYXJ0SXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrdTogcHJvZHVjdC5za3UsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdHk6IHBhcnNlSW50KGV2LnRhcmdldC52YWx1ZSwgMTApXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9JMThuPlxuXG4gICAgICAgICAgeyEhZXJyb3IgJiYgPFRleHQgY29sb3I9XCJlcnJvclwiPntlcnJvci5tZXNzYWdlfTwvVGV4dD59XG4gICAgICAgIDwvQm94PlxuICAgICAgKX1cbiAgICA8L1VwZGF0ZUNhcnRJdGVtTXV0YXRpb24+XG4gIDwvQm94PlxuKTtcbiJdfQ==