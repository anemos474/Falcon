const fs = require('fs-extra');
const babelJest = require('babel-jest');
const paths = require('../../paths');

const anyBabelConfigFile = paths.appBabelConfigs.find(file => fs.existsSync(file));
const config = {
  configFile: anyBabelConfigFile,
  presets: anyBabelConfigFile ? null : [require.resolve('@deity/babel-preset-falcon-client')]
};

module.exports = babelJest.createTransformer(config);
