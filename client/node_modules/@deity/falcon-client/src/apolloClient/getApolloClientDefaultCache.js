import { InMemoryCache } from '@apollo/client/cache';
import { getPossibleTypes } from './getPossibleTypes';

/**
 * Configure default Cache for ApolloClient
 * @param {import('@apollo/client/cache').IntrospectionResultData} fragmentMatcherData
 * @returns {import('@apollo/client/cache').InMemoryCache}
 */
function getApolloClientCache(fragmentMatcherData) {
  return new InMemoryCache({
    typePolicies: {
      MenuItem: {
        keyFields: ['id', 'urlPath']
      }
    },
    ...(fragmentMatcherData ? { possibleTypes: getPossibleTypes(fragmentMatcherData) } : {})
  });
}

export { getApolloClientCache };
