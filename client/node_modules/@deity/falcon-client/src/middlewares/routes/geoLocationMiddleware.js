/**
 * @returns {import('koa').Middleware} Koa middleware
 */
export default () => {
  return async (ctx, next) => {
    const country = ctx.request.get('X-GeoIP-Country');
    const region = ctx.request.get('X-GeoIP-Region-Name');
    const city = ctx.request.get('X-GeoIP-City');
    const postCode = ctx.request.get('X-GeoIP-Postal-Code');

    ctx.state.geoLocation = {
      country,
      region,
      city,
      postCode
    };

    return next();
  };
};
