"use strict";

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.UserInputError = exports.EntityNotFoundError = exports.ForbiddenError = exports.AuthenticationError = exports.FalconError = void 0;

var _assertThisInitialized2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/assertThisInitialized"));

var _inheritsLoose2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/inheritsLoose"));

var _wrapNativeSuper2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/wrapNativeSuper"));

var _codes = /*#__PURE__*/require("./codes");

// FalconError is simplified version of ApolloError
// that does not import whole `graphql` package resulting in much smaller bundle size
// https://github.com/apollographql/apollo-server/blob/master/packages/apollo-server-errors/src/index.ts
var FalconError = /*#__PURE__*/function (_Error) {
  (0, _inheritsLoose2.default)(FalconError, _Error);

  function FalconError(message, code) {
    var _this;

    _this = _Error.call(this, message) || this; // if no name provided, use the default. defineProperty ensures that it stays non-enumerable

    if (!_this.name) {
      Object.defineProperty((0, _assertThisInitialized2.default)(_this), 'name', {
        value: 'FalconError'
      });
    }

    if (code) {
      Object.defineProperty((0, _assertThisInitialized2.default)(_this), 'extensions', {
        value: {
          code: code
        }
      });
    }

    return _this;
  }

  return FalconError;
}( /*#__PURE__*/(0, _wrapNativeSuper2.default)(Error));

exports.FalconError = FalconError;

var AuthenticationError = /*#__PURE__*/function (_FalconError) {
  (0, _inheritsLoose2.default)(AuthenticationError, _FalconError);

  /**
   * @param {string} message
   * @param {string | undefined} code optional error code, default is `UNAUTHENTICATED`
   */
  function AuthenticationError(message, code) {
    var _this2;

    _this2 = _FalconError.call(this, message, code || _codes.codes.UNAUTHENTICATED) || this;
    Object.defineProperty((0, _assertThisInitialized2.default)(_this2), 'name', {
      value: 'AuthenticationError'
    });
    return _this2;
  }

  return AuthenticationError;
}(FalconError);

exports.AuthenticationError = AuthenticationError;

var ForbiddenError = /*#__PURE__*/function (_FalconError2) {
  (0, _inheritsLoose2.default)(ForbiddenError, _FalconError2);

  /**
   * @param {string} [message]
   */
  function ForbiddenError(message) {
    var _this3;

    if (message === void 0) {
      message = 'Access is forbidden';
    }

    _this3 = _FalconError2.call(this, message, _codes.codes.FORBIDDEN) || this;
    Object.defineProperty((0, _assertThisInitialized2.default)(_this3), 'name', {
      value: 'ForbiddenError'
    });
    return _this3;
  }

  return ForbiddenError;
}(FalconError);

exports.ForbiddenError = ForbiddenError;

var EntityNotFoundError = /*#__PURE__*/function (_FalconError3) {
  (0, _inheritsLoose2.default)(EntityNotFoundError, _FalconError3);

  /**
   * @param {string} [message]
   */
  function EntityNotFoundError(message) {
    var _this4;

    if (message === void 0) {
      message = 'Entity not found';
    }

    _this4 = _FalconError3.call(this, message, _codes.codes.NOT_FOUND) || this;
    Object.defineProperty((0, _assertThisInitialized2.default)(_this4), 'name', {
      value: 'EntityNotFoundError'
    });
    return _this4;
  }

  return EntityNotFoundError;
}(FalconError);
/**
 * @example
 * ```javascript
 *  throw new UserInputError(e.message, {
 *    errors: {
 *      email: { code: 'email_already_taken', message: e.message }
 *    }
 *  });
 * ```
 */


exports.EntityNotFoundError = EntityNotFoundError;

var UserInputError = /*#__PURE__*/function (_FalconError4) {
  (0, _inheritsLoose2.default)(UserInputError, _FalconError4);

  /**
   * @param {string} message
   * @param {object} [properties]
   */
  function UserInputError(message, properties) {
    var _this5;

    _this5 = _FalconError4.call(this, message, _codes.codes.BAD_USER_INPUT, properties) || this;
    Object.defineProperty((0, _assertThisInitialized2.default)(_this5), 'name', {
      value: 'UserInputError'
    });
    return _this5;
  }

  return UserInputError;
}(FalconError);

exports.UserInputError = UserInputError;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lcnJvcnMuanMiXSwibmFtZXMiOlsiRmFsY29uRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsIm5hbWUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiRXJyb3IiLCJBdXRoZW50aWNhdGlvbkVycm9yIiwiY29kZXMiLCJVTkFVVEhFTlRJQ0FURUQiLCJGb3JiaWRkZW5FcnJvciIsIkZPUkJJRERFTiIsIkVudGl0eU5vdEZvdW5kRXJyb3IiLCJOT1RfRk9VTkQiLCJVc2VySW5wdXRFcnJvciIsInByb3BlcnRpZXMiLCJCQURfVVNFUl9JTlBVVCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBO0FBQ0E7QUFDQTtJQUNhQSxXOzs7QUFDWCx1QkFBWUMsT0FBWixFQUFxQkMsSUFBckIsRUFBMkI7QUFBQTs7QUFDekIsOEJBQU1ELE9BQU4sVUFEeUIsQ0FFekI7O0FBQ0EsUUFBSSxDQUFDLE1BQUtFLElBQVYsRUFBZ0I7QUFDZEMsTUFBQUEsTUFBTSxDQUFDQyxjQUFQLDhDQUE0QixNQUE1QixFQUFvQztBQUFFQyxRQUFBQSxLQUFLLEVBQUU7QUFBVCxPQUFwQztBQUNEOztBQUVELFFBQUlKLElBQUosRUFBVTtBQUNSRSxNQUFBQSxNQUFNLENBQUNDLGNBQVAsOENBQTRCLFlBQTVCLEVBQTBDO0FBQUVDLFFBQUFBLEtBQUssRUFBRTtBQUFFSixVQUFBQSxJQUFJLEVBQUpBO0FBQUY7QUFBVCxPQUExQztBQUNEOztBQVR3QjtBQVUxQjs7OytDQVg4QkssSzs7OztJQWNwQkMsbUI7OztBQUNYO0FBQ0Y7QUFDQTtBQUNBO0FBQ0UsK0JBQVlQLE9BQVosRUFBcUJDLElBQXJCLEVBQTJCO0FBQUE7O0FBQ3pCLHFDQUFNRCxPQUFOLEVBQWVDLElBQUksSUFBSU8sYUFBTUMsZUFBN0I7QUFDQU4sSUFBQUEsTUFBTSxDQUFDQyxjQUFQLCtDQUE0QixNQUE1QixFQUFvQztBQUFFQyxNQUFBQSxLQUFLLEVBQUU7QUFBVCxLQUFwQztBQUZ5QjtBQUcxQjs7O0VBUnNDTixXOzs7O0lBVzVCVyxjOzs7QUFDWDtBQUNGO0FBQ0E7QUFDRSwwQkFBWVYsT0FBWixFQUE2QztBQUFBOztBQUFBLFFBQWpDQSxPQUFpQztBQUFqQ0EsTUFBQUEsT0FBaUMsR0FBdkIscUJBQXVCO0FBQUE7O0FBQzNDLHNDQUFNQSxPQUFOLEVBQWVRLGFBQU1HLFNBQXJCO0FBQ0FSLElBQUFBLE1BQU0sQ0FBQ0MsY0FBUCwrQ0FBNEIsTUFBNUIsRUFBb0M7QUFBRUMsTUFBQUEsS0FBSyxFQUFFO0FBQVQsS0FBcEM7QUFGMkM7QUFHNUM7OztFQVBpQ04sVzs7OztJQVV2QmEsbUI7OztBQUNYO0FBQ0Y7QUFDQTtBQUNFLCtCQUFZWixPQUFaLEVBQTBDO0FBQUE7O0FBQUEsUUFBOUJBLE9BQThCO0FBQTlCQSxNQUFBQSxPQUE4QixHQUFwQixrQkFBb0I7QUFBQTs7QUFDeEMsc0NBQU1BLE9BQU4sRUFBZVEsYUFBTUssU0FBckI7QUFDQVYsSUFBQUEsTUFBTSxDQUFDQyxjQUFQLCtDQUE0QixNQUE1QixFQUFvQztBQUFFQyxNQUFBQSxLQUFLLEVBQUU7QUFBVCxLQUFwQztBQUZ3QztBQUd6Qzs7O0VBUHNDTixXO0FBVXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztJQUNhZSxjOzs7QUFDWDtBQUNGO0FBQ0E7QUFDQTtBQUNFLDBCQUFZZCxPQUFaLEVBQXFCZSxVQUFyQixFQUFpQztBQUFBOztBQUMvQixzQ0FBTWYsT0FBTixFQUFlUSxhQUFNUSxjQUFyQixFQUFxQ0QsVUFBckM7QUFFQVosSUFBQUEsTUFBTSxDQUFDQyxjQUFQLCtDQUE0QixNQUE1QixFQUFvQztBQUFFQyxNQUFBQSxLQUFLLEVBQUU7QUFBVCxLQUFwQztBQUgrQjtBQUloQzs7O0VBVGlDTixXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29kZXMgfSBmcm9tICcuL2NvZGVzJztcblxuLy8gRmFsY29uRXJyb3IgaXMgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIEFwb2xsb0Vycm9yXG4vLyB0aGF0IGRvZXMgbm90IGltcG9ydCB3aG9sZSBgZ3JhcGhxbGAgcGFja2FnZSByZXN1bHRpbmcgaW4gbXVjaCBzbWFsbGVyIGJ1bmRsZSBzaXplXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYXBvbGxvZ3JhcGhxbC9hcG9sbG8tc2VydmVyL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2Fwb2xsby1zZXJ2ZXItZXJyb3JzL3NyYy9pbmRleC50c1xuZXhwb3J0IGNsYXNzIEZhbGNvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgLy8gaWYgbm8gbmFtZSBwcm92aWRlZCwgdXNlIHRoZSBkZWZhdWx0LiBkZWZpbmVQcm9wZXJ0eSBlbnN1cmVzIHRoYXQgaXQgc3RheXMgbm9uLWVudW1lcmFibGVcbiAgICBpZiAoIXRoaXMubmFtZSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICduYW1lJywgeyB2YWx1ZTogJ0ZhbGNvbkVycm9yJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29kZSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdleHRlbnNpb25zJywgeyB2YWx1ZTogeyBjb2RlIH0gfSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgRmFsY29uRXJyb3Ige1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IGNvZGUgb3B0aW9uYWwgZXJyb3IgY29kZSwgZGVmYXVsdCBpcyBgVU5BVVRIRU5USUNBVEVEYFxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUgfHwgY29kZXMuVU5BVVRIRU5USUNBVEVEKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ25hbWUnLCB7IHZhbHVlOiAnQXV0aGVudGljYXRpb25FcnJvcicgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZvcmJpZGRlbkVycm9yIGV4dGVuZHMgRmFsY29uRXJyb3Ige1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXVxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdBY2Nlc3MgaXMgZm9yYmlkZGVuJykge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGVzLkZPUkJJRERFTik7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICduYW1lJywgeyB2YWx1ZTogJ0ZvcmJpZGRlbkVycm9yJyB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRW50aXR5Tm90Rm91bmRFcnJvciBleHRlbmRzIEZhbGNvbkVycm9yIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnRW50aXR5IG5vdCBmb3VuZCcpIHtcbiAgICBzdXBlcihtZXNzYWdlLCBjb2Rlcy5OT1RfRk9VTkQpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsgdmFsdWU6ICdFbnRpdHlOb3RGb3VuZEVycm9yJyB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAgdGhyb3cgbmV3IFVzZXJJbnB1dEVycm9yKGUubWVzc2FnZSwge1xuICogICAgZXJyb3JzOiB7XG4gKiAgICAgIGVtYWlsOiB7IGNvZGU6ICdlbWFpbF9hbHJlYWR5X3Rha2VuJywgbWVzc2FnZTogZS5tZXNzYWdlIH1cbiAqICAgIH1cbiAqICB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgVXNlcklucHV0RXJyb3IgZXh0ZW5kcyBGYWxjb25FcnJvciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVxuICAgKiBAcGFyYW0ge29iamVjdH0gW3Byb3BlcnRpZXNdXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBwcm9wZXJ0aWVzKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZXMuQkFEX1VTRVJfSU5QVVQsIHByb3BlcnRpZXMpO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICduYW1lJywgeyB2YWx1ZTogJ1VzZXJJbnB1dEVycm9yJyB9KTtcbiAgfVxufVxuIl19