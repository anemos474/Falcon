{"version":3,"file":"falcon-errors.cjs.js","sources":["../src/codes.js","../src/errors.js"],"sourcesContent":["const codes = {\n  GRAPHQL_PARSE_FAILED: null,\n  GRAPHQL_VALIDATION_FAILED: null,\n  INTERNAL_SERVER_ERROR: null,\n  UNAUTHENTICATED: null,\n  FORBIDDEN: null,\n  NOT_FOUND: null,\n  CUSTOMER_TOKEN_NOT_FOUND: null,\n  CUSTOMER_TOKEN_EXPIRED: null,\n  SESSION_NOT_FOUND: null,\n  BAD_USER_INPUT: null\n};\n\nObject.keys(codes).forEach(key => {\n  codes[key] = key;\n});\n\nexport { codes };\n","import { codes } from './codes';\n\n// FalconError is simplified version of ApolloError\n// that does not import whole `graphql` package resulting in much smaller bundle size\n// https://github.com/apollographql/apollo-server/blob/master/packages/apollo-server-errors/src/index.ts\nexport class FalconError extends Error {\n  constructor(message, code) {\n    super(message);\n    // if no name provided, use the default. defineProperty ensures that it stays non-enumerable\n    if (!this.name) {\n      Object.defineProperty(this, 'name', { value: 'FalconError' });\n    }\n\n    if (code) {\n      Object.defineProperty(this, 'extensions', { value: { code } });\n    }\n  }\n}\n\nexport class AuthenticationError extends FalconError {\n  /**\n   * @param {string} message\n   * @param {string | undefined} code optional error code, default is `UNAUTHENTICATED`\n   */\n  constructor(message, code) {\n    super(message, code || codes.UNAUTHENTICATED);\n    Object.defineProperty(this, 'name', { value: 'AuthenticationError' });\n  }\n}\n\nexport class ForbiddenError extends FalconError {\n  /**\n   * @param {string} [message]\n   */\n  constructor(message = 'Access is forbidden') {\n    super(message, codes.FORBIDDEN);\n    Object.defineProperty(this, 'name', { value: 'ForbiddenError' });\n  }\n}\n\nexport class EntityNotFoundError extends FalconError {\n  /**\n   * @param {string} [message]\n   */\n  constructor(message = 'Entity not found') {\n    super(message, codes.NOT_FOUND);\n    Object.defineProperty(this, 'name', { value: 'EntityNotFoundError' });\n  }\n}\n\n/**\n * @example\n * ```javascript\n *  throw new UserInputError(e.message, {\n *    errors: {\n *      email: { code: 'email_already_taken', message: e.message }\n *    }\n *  });\n * ```\n */\nexport class UserInputError extends FalconError {\n  /**\n   * @param {string} message\n   * @param {object} [properties]\n   */\n  constructor(message, properties) {\n    super(message, codes.BAD_USER_INPUT, properties);\n\n    Object.defineProperty(this, 'name', { value: 'UserInputError' });\n  }\n}\n"],"names":["codes","GRAPHQL_PARSE_FAILED","GRAPHQL_VALIDATION_FAILED","INTERNAL_SERVER_ERROR","UNAUTHENTICATED","FORBIDDEN","NOT_FOUND","CUSTOMER_TOKEN_NOT_FOUND","CUSTOMER_TOKEN_EXPIRED","SESSION_NOT_FOUND","BAD_USER_INPUT","Object","keys","forEach","key","FalconError","Error","constructor","message","code","name","defineProperty","value","AuthenticationError","ForbiddenError","EntityNotFoundError","UserInputError","properties"],"mappings":";;;;MAAMA,KAAK,GAAG;EACZC,oBAAoB,EAAE,IADV;EAEZC,yBAAyB,EAAE,IAFf;EAGZC,qBAAqB,EAAE,IAHX;EAIZC,eAAe,EAAE,IAJL;EAKZC,SAAS,EAAE,IALC;EAMZC,SAAS,EAAE,IANC;EAOZC,wBAAwB,EAAE,IAPd;EAQZC,sBAAsB,EAAE,IARZ;EASZC,iBAAiB,EAAE,IATP;EAUZC,cAAc,EAAE;CAVlB;AAaAC,MAAM,CAACC,IAAP,CAAYZ,KAAZ,EAAmBa,OAAnB,CAA2BC,GAAG,IAAI;EAChCd,KAAK,CAACc,GAAD,CAAL,GAAaA,GAAb;CADF;;ACVA;;;AAEA,AAAO,MAAMC,WAAN,SAA0BC,KAA1B,CAAgC;EACrCC,WAAW,CAACC,OAAD,EAAUC,IAAV,EAAgB;UACnBD,OAAN,EADyB;;QAGrB,CAAC,KAAKE,IAAV,EAAgB;MACdT,MAAM,CAACU,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;QAAEC,KAAK,EAAE;OAA7C;;;QAGEH,IAAJ,EAAU;MACRR,MAAM,CAACU,cAAP,CAAsB,IAAtB,EAA4B,YAA5B,EAA0C;QAAEC,KAAK,EAAE;UAAEH;;OAArD;;;;;AAKN,AAAO,MAAMI,mBAAN,SAAkCR,WAAlC,CAA8C;;;;;EAKnDE,WAAW,CAACC,OAAD,EAAUC,IAAV,EAAgB;UACnBD,OAAN,EAAeC,IAAI,IAAInB,KAAK,CAACI,eAA7B;IACAO,MAAM,CAACU,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;MAAEC,KAAK,EAAE;KAA7C;;;;AAIJ,AAAO,MAAME,cAAN,SAA6BT,WAA7B,CAAyC;;;;EAI9CE,WAAW,CAACC,OAAO,GAAG,qBAAX,EAAkC;UACrCA,OAAN,EAAelB,KAAK,CAACK,SAArB;IACAM,MAAM,CAACU,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;MAAEC,KAAK,EAAE;KAA7C;;;;AAIJ,AAAO,MAAMG,mBAAN,SAAkCV,WAAlC,CAA8C;;;;EAInDE,WAAW,CAACC,OAAO,GAAG,kBAAX,EAA+B;UAClCA,OAAN,EAAelB,KAAK,CAACM,SAArB;IACAK,MAAM,CAACU,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;MAAEC,KAAK,EAAE;KAA7C;;;;;;;;;;;;;;;AAcJ,AAAO,MAAMI,cAAN,SAA6BX,WAA7B,CAAyC;;;;;EAK9CE,WAAW,CAACC,OAAD,EAAUS,UAAV,EAAsB;UACzBT,OAAN,EAAelB,KAAK,CAACU,cAArB,EAAqCiB,UAArC;IAEAhB,MAAM,CAACU,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;MAAEC,KAAK,EAAE;KAA7C;;;;;;;;;;;;"}