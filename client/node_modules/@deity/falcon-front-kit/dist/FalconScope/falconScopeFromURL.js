"use strict";

exports.__esModule = true;
exports.setFalconScopeToURL = exports.getFalconScopeFromURL = void 0;

/**
 * provide FalconClient side Scope configuration from URL
 * @param config
 * @param context
 */
var getFalconScopeFromURL = function getFalconScopeFromURL(config, context) {
  var scopes = config.scopes,
      defaultId = config.defaultId;
  var url = context.url;
  var scope = scopes.find(function (x) {
    return url.pathname.startsWith("/" + x.id);
  });

  if (scope) {
    return {
      id: scope.id,
      pathBasename: scope.id === defaultId ? '' : scope.id
    };
  }

  return {
    id: scopes.find(function (x) {
      return x.id === defaultId;
    }).id
  };
};

exports.getFalconScopeFromURL = getFalconScopeFromURL;

var setFalconScopeToURL = function setFalconScopeToURL(falconScopeId, config, context) {
  var defaultId = config.defaultId;

  if (defaultId === falconScopeId) {
    window.location.pathname = "/";
  } else {
    window.location.pathname = "/" + falconScopeId;
  }

  return undefined;
};

exports.setFalconScopeToURL = setFalconScopeToURL;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9GYWxjb25TY29wZS9mYWxjb25TY29wZUZyb21VUkwudHMiXSwibmFtZXMiOlsiZ2V0RmFsY29uU2NvcGVGcm9tVVJMIiwiY29uZmlnIiwiY29udGV4dCIsInNjb3BlcyIsImRlZmF1bHRJZCIsInVybCIsInNjb3BlIiwiZmluZCIsIngiLCJwYXRobmFtZSIsInN0YXJ0c1dpdGgiLCJpZCIsInBhdGhCYXNlbmFtZSIsInNldEZhbGNvblNjb3BlVG9VUkwiLCJmYWxjb25TY29wZUlkIiwid2luZG93IiwibG9jYXRpb24iLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiI7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLElBQU1BLHFCQUFpRCxHQUFHLFNBQXBEQSxxQkFBb0QsQ0FBQ0MsTUFBRCxFQUFTQyxPQUFULEVBQXFCO0FBQ3BGLE1BQVFDLE1BQVIsR0FBOEJGLE1BQTlCLENBQVFFLE1BQVI7QUFBQSxNQUFnQkMsU0FBaEIsR0FBOEJILE1BQTlCLENBQWdCRyxTQUFoQjtBQUNBLE1BQVFDLEdBQVIsR0FBZ0JILE9BQWhCLENBQVFHLEdBQVI7QUFFQSxNQUFNQyxLQUFLLEdBQUdILE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLFVBQUFDLENBQUM7QUFBQSxXQUFJSCxHQUFHLENBQUNJLFFBQUosQ0FBYUMsVUFBYixPQUE0QkYsQ0FBQyxDQUFDRyxFQUE5QixDQUFKO0FBQUEsR0FBYixDQUFkOztBQUNBLE1BQUlMLEtBQUosRUFBVztBQUNULFdBQU87QUFDTEssTUFBQUEsRUFBRSxFQUFFTCxLQUFLLENBQUNLLEVBREw7QUFFTEMsTUFBQUEsWUFBWSxFQUFFTixLQUFLLENBQUNLLEVBQU4sS0FBYVAsU0FBYixHQUF5QixFQUF6QixHQUE4QkUsS0FBSyxDQUFDSztBQUY3QyxLQUFQO0FBSUQ7O0FBRUQsU0FBTztBQUNMQSxJQUFBQSxFQUFFLEVBQUVSLE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLFVBQUFDLENBQUM7QUFBQSxhQUFJQSxDQUFDLENBQUNHLEVBQUYsS0FBU1AsU0FBYjtBQUFBLEtBQWIsRUFBcUNPO0FBRHBDLEdBQVA7QUFHRCxDQWZNOzs7O0FBaUJBLElBQU1FLG1CQUErQyxHQUFHLFNBQWxEQSxtQkFBa0QsQ0FBQ0MsYUFBRCxFQUFnQmIsTUFBaEIsRUFBd0JDLE9BQXhCLEVBQW9DO0FBQ2pHLE1BQVFFLFNBQVIsR0FBc0JILE1BQXRCLENBQVFHLFNBQVI7O0FBRUEsTUFBSUEsU0FBUyxLQUFLVSxhQUFsQixFQUFpQztBQUMvQkMsSUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCUCxRQUFoQjtBQUNELEdBRkQsTUFFTztBQUNMTSxJQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JQLFFBQWhCLFNBQStCSyxhQUEvQjtBQUNEOztBQUVELFNBQU9HLFNBQVA7QUFDRCxDQVZNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0RmFsY29uQ2xpZW50U2NvcGVDb25maWcsIFNldEZhbGNvbkNsaWVudFNjb3BlQ29uZmlnIH0gZnJvbSAnLi9GYWxjb25DbGllbnRTY29wZUNvbmZpZyc7XG5cbi8qKlxuICogcHJvdmlkZSBGYWxjb25DbGllbnQgc2lkZSBTY29wZSBjb25maWd1cmF0aW9uIGZyb20gVVJMXG4gKiBAcGFyYW0gY29uZmlnXG4gKiBAcGFyYW0gY29udGV4dFxuICovXG5leHBvcnQgY29uc3QgZ2V0RmFsY29uU2NvcGVGcm9tVVJMOiBHZXRGYWxjb25DbGllbnRTY29wZUNvbmZpZyA9IChjb25maWcsIGNvbnRleHQpID0+IHtcbiAgY29uc3QgeyBzY29wZXMsIGRlZmF1bHRJZCB9ID0gY29uZmlnO1xuICBjb25zdCB7IHVybCB9ID0gY29udGV4dDtcblxuICBjb25zdCBzY29wZSA9IHNjb3Blcy5maW5kKHggPT4gdXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoYC8ke3guaWR9YCkpO1xuICBpZiAoc2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHNjb3BlLmlkLFxuICAgICAgcGF0aEJhc2VuYW1lOiBzY29wZS5pZCA9PT0gZGVmYXVsdElkID8gJycgOiBzY29wZS5pZFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlkOiBzY29wZXMuZmluZCh4ID0+IHguaWQgPT09IGRlZmF1bHRJZCkuaWRcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRGYWxjb25TY29wZVRvVVJMOiBTZXRGYWxjb25DbGllbnRTY29wZUNvbmZpZyA9IChmYWxjb25TY29wZUlkLCBjb25maWcsIGNvbnRleHQpID0+IHtcbiAgY29uc3QgeyBkZWZhdWx0SWQgfSA9IGNvbmZpZztcblxuICBpZiAoZGVmYXVsdElkID09PSBmYWxjb25TY29wZUlkKSB7XG4gICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID0gYC9gO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9IGAvJHtmYWxjb25TY29wZUlkfWA7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbiJdfQ==