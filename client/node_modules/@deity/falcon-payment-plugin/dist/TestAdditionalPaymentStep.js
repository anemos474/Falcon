"use strict";

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.TestAdditionalPaymentStep = void 0;

var _inheritsLoose2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/inheritsLoose"));

var _react = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("react"));

var TestAdditionalPaymentStep = /*#__PURE__*/function (_React$Component) {
  (0, _inheritsLoose2.default)(TestAdditionalPaymentStep, _React$Component);

  function TestAdditionalPaymentStep(props) {
    var _this;

    _this = _React$Component.call(this, props) || this;
    _this.form = void 0;
    _this.form = /*#__PURE__*/_react.default.createRef();
    return _this;
  }

  var _proto = TestAdditionalPaymentStep.prototype;

  _proto.componentDidMount = function componentDidMount() {
    var form = this.form.current;
    var method = form.method,
        action = form.action;

    if (method.toLowerCase() === 'get') {
      // Delay the redirect a little bit, to give the ConfirmLeavePrompt time to remove the beforeunload handler
      setTimeout(function () {
        window.location.href = action;
      }, 1500);
    } else {
      form.submit();
    }
  };

  _proto.render = function render() {
    var _this$props = this.props,
        url = _this$props.url,
        _this$props$method = _this$props.method,
        method = _this$props$method === void 0 ? 'POST' : _this$props$method,
        fields = _this$props.fields;
    return /*#__PURE__*/_react.default.createElement("form", {
      ref: this.form,
      method: method,
      action: url
    }, (fields || []).map(function (field) {
      return /*#__PURE__*/_react.default.createElement("input", {
        key: field.name,
        type: "hidden",
        name: field.name,
        value: field.value
      });
    }));
  };

  return TestAdditionalPaymentStep;
}(_react.default.Component);

exports.TestAdditionalPaymentStep = TestAdditionalPaymentStep;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9UZXN0QWRkaXRpb25hbFBheW1lbnRTdGVwLnRzeCJdLCJuYW1lcyI6WyJUZXN0QWRkaXRpb25hbFBheW1lbnRTdGVwIiwicHJvcHMiLCJmb3JtIiwiUmVhY3QiLCJjcmVhdGVSZWYiLCJjb21wb25lbnREaWRNb3VudCIsImN1cnJlbnQiLCJtZXRob2QiLCJhY3Rpb24iLCJ0b0xvd2VyQ2FzZSIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJzdWJtaXQiLCJyZW5kZXIiLCJ1cmwiLCJmaWVsZHMiLCJtYXAiLCJmaWVsZCIsIm5hbWUiLCJ2YWx1ZSIsIkNvbXBvbmVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0lBYWFBLHlCOzs7QUFHWCxxQ0FBWUMsS0FBWixFQUFtRDtBQUFBOztBQUNqRCx3Q0FBTUEsS0FBTjtBQURpRCxVQUZuREMsSUFFbUQ7QUFFakQsVUFBS0EsSUFBTCxnQkFBWUMsZUFBTUMsU0FBTixFQUFaO0FBRmlEO0FBR2xEOzs7O1NBRURDLGlCLEdBQUEsNkJBQW9CO0FBQ2xCLFFBQU1ILElBQXFCLEdBQUcsS0FBS0EsSUFBTCxDQUFVSSxPQUF4QztBQUNBLFFBQVFDLE1BQVIsR0FBMkJMLElBQTNCLENBQVFLLE1BQVI7QUFBQSxRQUFnQkMsTUFBaEIsR0FBMkJOLElBQTNCLENBQWdCTSxNQUFoQjs7QUFDQSxRQUFJRCxNQUFNLENBQUNFLFdBQVAsT0FBeUIsS0FBN0IsRUFBb0M7QUFDbEM7QUFDQUMsTUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDZkMsUUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxJQUFoQixHQUF1QkwsTUFBdkI7QUFDRCxPQUZTLEVBRVAsSUFGTyxDQUFWO0FBR0QsS0FMRCxNQUtPO0FBQ0xOLE1BQUFBLElBQUksQ0FBQ1ksTUFBTDtBQUNEO0FBQ0YsRzs7U0FFREMsTSxHQUFBLGtCQUFTO0FBQ1Asc0JBQXlDLEtBQUtkLEtBQTlDO0FBQUEsUUFBUWUsR0FBUixlQUFRQSxHQUFSO0FBQUEseUNBQWFULE1BQWI7QUFBQSxRQUFhQSxNQUFiLG1DQUFzQixNQUF0QjtBQUFBLFFBQThCVSxNQUE5QixlQUE4QkEsTUFBOUI7QUFFQSx3QkFDRTtBQUFNLE1BQUEsR0FBRyxFQUFFLEtBQUtmLElBQWhCO0FBQXNCLE1BQUEsTUFBTSxFQUFFSyxNQUE5QjtBQUFzQyxNQUFBLE1BQU0sRUFBRVM7QUFBOUMsT0FDRyxDQUFDQyxNQUFNLElBQUksRUFBWCxFQUFlQyxHQUFmLENBQW1CLFVBQUFDLEtBQUs7QUFBQSwwQkFDdkI7QUFBTyxRQUFBLEdBQUcsRUFBRUEsS0FBSyxDQUFDQyxJQUFsQjtBQUF3QixRQUFBLElBQUksRUFBQyxRQUE3QjtBQUFzQyxRQUFBLElBQUksRUFBRUQsS0FBSyxDQUFDQyxJQUFsRDtBQUF3RCxRQUFBLEtBQUssRUFBRUQsS0FBSyxDQUFDRTtBQUFyRSxRQUR1QjtBQUFBLEtBQXhCLENBREgsQ0FERjtBQU9ELEc7OztFQS9CNENsQixlQUFNbUIsUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCB0eXBlIFRlc3RBZGRpdGlvbmFsUGF5bWVudFN0ZXBQcm9wcyA9IHtcbiAgdXJsOiBzdHJpbmc7XG4gIG1ldGhvZD86IHN0cmluZztcbiAgZmllbGRzPzogVGVzdDNkU2VjdXJlUHJvcHNGaWVsZFtdO1xufTtcblxuZXhwb3J0IHR5cGUgVGVzdDNkU2VjdXJlUHJvcHNGaWVsZCA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNsYXNzIFRlc3RBZGRpdGlvbmFsUGF5bWVudFN0ZXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8VGVzdEFkZGl0aW9uYWxQYXltZW50U3RlcFByb3BzPiB7XG4gIGZvcm06IFJlYWN0LlJlZk9iamVjdDxIVE1MRm9ybUVsZW1lbnQ+O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBUZXN0QWRkaXRpb25hbFBheW1lbnRTdGVwUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5mb3JtID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxGb3JtRWxlbWVudD4oKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IGZvcm06IEhUTUxGb3JtRWxlbWVudCA9IHRoaXMuZm9ybS5jdXJyZW50ITtcbiAgICBjb25zdCB7IG1ldGhvZCwgYWN0aW9uIH0gPSBmb3JtO1xuICAgIGlmIChtZXRob2QudG9Mb3dlckNhc2UoKSA9PT0gJ2dldCcpIHtcbiAgICAgIC8vIERlbGF5IHRoZSByZWRpcmVjdCBhIGxpdHRsZSBiaXQsIHRvIGdpdmUgdGhlIENvbmZpcm1MZWF2ZVByb21wdCB0aW1lIHRvIHJlbW92ZSB0aGUgYmVmb3JldW5sb2FkIGhhbmRsZXJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGFjdGlvbjtcbiAgICAgIH0sIDE1MDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHVybCwgbWV0aG9kID0gJ1BPU1QnLCBmaWVsZHMgfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gcmVmPXt0aGlzLmZvcm19IG1ldGhvZD17bWV0aG9kfSBhY3Rpb249e3VybH0+XG4gICAgICAgIHsoZmllbGRzIHx8IFtdKS5tYXAoZmllbGQgPT4gKFxuICAgICAgICAgIDxpbnB1dCBrZXk9e2ZpZWxkLm5hbWV9IHR5cGU9XCJoaWRkZW5cIiBuYW1lPXtmaWVsZC5uYW1lfSB2YWx1ZT17ZmllbGQudmFsdWV9IC8+XG4gICAgICAgICkpfVxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cbn1cbiJdfQ==