"use strict";

var _interopRequireDefault = /*#__PURE__*/require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.MollieCardPlugin = void 0;

var _regenerator = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("@babel/runtime/helpers/asyncToGenerator"));

var _withMollie = /*#__PURE__*/require("./withMollie");

var Mollie = function Mollie(props) {
  var children = props.children,
      mollie = props.mollie;

  var payFn = /*#__PURE__*/function () {
    var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(paymentData) {
      var _yield$mollie$createT, token, error;

      return _regenerator.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              if (!(props.method === 'creditcard')) {
                _context.next = 9;
                break;
              }

              _context.next = 3;
              return mollie.createToken();

            case 3:
              _yield$mollie$createT = _context.sent;
              token = _yield$mollie$createT.token;
              error = _yield$mollie$createT.error;

              if (!error) {
                _context.next = 8;
                break;
              }

              throw error;

            case 8:
              return _context.abrupt("return", {
                token: token
              });

            case 9:
              if (!paymentData) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return", paymentData);

            case 11:
              return _context.abrupt("return", {});

            case 12:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function payFn(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  return children(payFn, mollie);
};

var MollieCardPlugin = /*#__PURE__*/(0, _withMollie.withMollie)(Mollie);
exports.MollieCardPlugin = MollieCardPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9Nb2xsaWVDYXJkUGx1Z2luLnRzIl0sIm5hbWVzIjpbIk1vbGxpZSIsInByb3BzIiwiY2hpbGRyZW4iLCJtb2xsaWUiLCJwYXlGbiIsInBheW1lbnREYXRhIiwibWV0aG9kIiwiY3JlYXRlVG9rZW4iLCJ0b2tlbiIsImVycm9yIiwiTW9sbGllQ2FyZFBsdWdpbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQSxJQUFNQSxNQUFNLEdBQUcsU0FBVEEsTUFBUyxDQUFBQyxLQUFLLEVBQUk7QUFDdEIsTUFBUUMsUUFBUixHQUE2QkQsS0FBN0IsQ0FBUUMsUUFBUjtBQUFBLE1BQWtCQyxNQUFsQixHQUE2QkYsS0FBN0IsQ0FBa0JFLE1BQWxCOztBQUVBLE1BQU1DLEtBQUs7QUFBQSx1RkFBRyxpQkFBT0MsV0FBUDtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsb0JBRVJKLEtBQUssQ0FBQ0ssTUFBTixLQUFpQixZQUZUO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUEscUJBR3FCSCxNQUFNLENBQUNJLFdBQVAsRUFIckI7O0FBQUE7QUFBQTtBQUdGQyxjQUFBQSxLQUhFLHlCQUdGQSxLQUhFO0FBR0tDLGNBQUFBLEtBSEwseUJBR0tBLEtBSEw7O0FBQUEsbUJBSU5BLEtBSk07QUFBQTtBQUFBO0FBQUE7O0FBQUEsb0JBSU9BLEtBSlA7O0FBQUE7QUFBQSwrQ0FLSDtBQUNMRCxnQkFBQUEsS0FBSyxFQUFMQTtBQURLLGVBTEc7O0FBQUE7QUFBQSxtQkFXUkgsV0FYUTtBQUFBO0FBQUE7QUFBQTs7QUFBQSwrQ0FXWUEsV0FYWjs7QUFBQTtBQUFBLCtDQVlMLEVBWks7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsS0FBSDs7QUFBQSxvQkFBTEQsS0FBSztBQUFBO0FBQUE7QUFBQSxLQUFYOztBQWNBLFNBQU9GLFFBQVEsQ0FBQ0UsS0FBRCxFQUFRRCxNQUFSLENBQWY7QUFDRCxDQWxCRDs7QUFvQk8sSUFBTU8sZ0JBQWdCLGdCQUFHLDRCQUFXVixNQUFYLENBQXpCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2l0aE1vbGxpZSB9IGZyb20gJy4vd2l0aE1vbGxpZSc7XG5cbmNvbnN0IE1vbGxpZSA9IHByb3BzID0+IHtcbiAgY29uc3QgeyBjaGlsZHJlbiwgbW9sbGllIH0gPSBwcm9wcztcblxuICBjb25zdCBwYXlGbiA9IGFzeW5jIChwYXltZW50RGF0YTogT2JqZWN0IHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgLy8gQ3JlZGl0IGNhcmQgdG9rZW4gZ2VuZXJhdGlvblxuICAgIGlmIChwcm9wcy5tZXRob2QgPT09ICdjcmVkaXRjYXJkJykge1xuICAgICAgY29uc3QgeyB0b2tlbiwgZXJyb3IgfSA9IGF3YWl0IG1vbGxpZS5jcmVhdGVUb2tlbigpO1xuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRva2VuXG4gICAgICB9O1xuICAgIH1cbiAgICAvLyBQYXltZW50IHNwZWNpZmljIGRhdGFcbiAgICAvLyBodHRwczovL2RvY3MubW9sbGllLmNvbS9yZWZlcmVuY2UvdjIvb3JkZXJzLWFwaS9jcmVhdGUtb3JkZXIjcGF5bWVudC1wYXJhbWV0ZXJzXG4gICAgaWYgKHBheW1lbnREYXRhKSByZXR1cm4gcGF5bWVudERhdGE7XG4gICAgcmV0dXJuIHt9O1xuICB9O1xuICByZXR1cm4gY2hpbGRyZW4ocGF5Rm4sIG1vbGxpZSk7XG59O1xuXG5leHBvcnQgY29uc3QgTW9sbGllQ2FyZFBsdWdpbiA9IHdpdGhNb2xsaWUoTW9sbGllKTtcbiJdfQ==